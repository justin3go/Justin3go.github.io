<!DOCTYPE html>
<html lang="zh-CH">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DRFå­¦ä¹ ç¬”è®° | Justin3go's Blog-ğŸ–Š</title>
    <meta name="description" content="æˆ‘çš„æŠ€æœ¯åšå®¢ï¼Œç”¨å¿ƒè®°å½•çŸ¥è¯†ç¢ç‰‡ï¼Œæ±‡æ€»æ•´ç†ç¨‹åºå‘˜çŸ¥è¯†ã€‚">
    <link rel="stylesheet" href="/assets/style.8a11ac97.css">
    <link rel="modulepreload" href="/assets/Home.fc8ba9e3.js">
    <link rel="modulepreload" href="/assets/app.0b1f5e83.js">
    <link rel="modulepreload" href="/assets/çŸ¥è¯†åº“_åç«¯å‚¨å¤‡_DRFå­¦ä¹ ç¬”è®°.md.96a743e3.lean.js">
    
    <link rel="icon" href="/ava.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-alpha/dist/katex.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
  <meta name="twitter:title" content="DRFå­¦ä¹ ç¬”è®° | Justin3go&#39;s Blog-ğŸ–Š">
  <meta property="og:title" content="DRFå­¦ä¹ ç¬”è®° | Justin3go&#39;s Blog-ğŸ–Š">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Justin3go&#39;s Blog-ğŸ–Š, back to home" data-v-675d8756 data-v-cc01ef16><!----> Justin3go&#39;s Blog-ğŸ–Š</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>é¦–é¡µ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/çŸ¥è¯†åº“/" data-v-b8818f8c>çŸ¥è¯†åº“ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/æ¨è/" data-v-b8818f8c>ç«™é•¿æ¨è <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://space.bilibili.com/434542518" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Bç«™ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/Justin3go" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>é¦–é¡µ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/çŸ¥è¯†åº“/" data-v-b8818f8c>çŸ¥è¯†åº“ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/æ¨è/" data-v-b8818f8c>ç«™é•¿æ¨è <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://space.bilibili.com/434542518" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Bç«™ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/Justin3go" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/">ç®—æ³•ä¸æ•°æ®ç»“æ„</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/01åŸºç¡€æ¦‚å¿µ">åŸºç¡€æ¦‚å¿µ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/02çº¿æ€§è¡¨">çº¿æ€§è¡¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/03æ ˆå’Œé˜Ÿåˆ—">æ ˆå’Œé˜Ÿåˆ—</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/04æ•°ç»„">æ•°ç»„</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/05æ ‘">æ ‘</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/06å›¾">å›¾</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/07æŸ¥æ‰¾">æŸ¥æ‰¾</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/08æ’åº">æ’åº</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/09æ•£åˆ—è¡¨å®ç°æŸ¥æ‰¾">æ•£åˆ—è¡¨å®ç°æŸ¥æ‰¾</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/10ç®—æ³•æ¦‚è¿°">ç®—æ³•æ¦‚è¿°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/11é€’å½’ä¸åˆ†æ²»">é€’å½’ä¸åˆ†æ²»</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/12åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/13è´ªå¿ƒç®—æ³•">è´ªå¿ƒç®—æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/ç®—æ³•ä¸æ•°æ®ç»“æ„/14å›æº¯ä¸åˆ†æ”¯æé™">å›æº¯ä¸åˆ†æ”¯æé™</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/è®¡ç®—æœºåŸºç¡€çŸ¥è¯†/">è®¡ç®—æœºåŸºç¡€çŸ¥è¯†</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/è®¡ç®—æœºåŸºç¡€çŸ¥è¯†/æ“ä½œç³»ç»ŸåŸºç¡€">æ“ä½œç³»ç»ŸåŸºç¡€</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/è®¡ç®—æœºåŸºç¡€çŸ¥è¯†/æ“ä½œç³»ç»Ÿå†…å­˜åˆ†é…æ¨¡æ‹Ÿç¨‹åº">æ“ä½œç³»ç»Ÿå†…å­˜åˆ†é…æ¨¡æ‹Ÿç¨‹åº</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/JavaScript/">JavaScript</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/JavaScript/è¿™é“é¢˜åŸæ¥å¯ä»¥ç”¨åˆ°JSè¿™ä¹ˆå¤šçŸ¥è¯†ç‚¹ï¼">è¿™é“é¢˜åŸæ¥å¯ä»¥ç”¨åˆ°JSè¿™ä¹ˆå¤šçŸ¥è¯†ç‚¹ï¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/JavaScript/TypeScript">TypeScript</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/CSSç›¸å…³/">CSSç›¸å…³</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/CSSç›¸å…³/01éƒ½2022å¹´äº†ï¼Œè¿˜æ˜¯å¾—å­¦åœ£æ¯å¸ƒå±€ä¸åŒé£ç¿¼å¸ƒå±€">åœ£æ¯å¸ƒå±€ä¸åŒé£ç¿¼å¸ƒå±€</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/å‰ç«¯æ¡†æ¶/">å‰ç«¯æ¡†æ¶</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/å‰ç«¯æ¡†æ¶/01Vue3æ˜¯å¦‚ä½•è¿è¡Œçš„">Vue3æ˜¯å¦‚ä½•è¿è¡Œçš„</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/å‰ç«¯æ¡†æ¶/02Vue3ç¼–è¯‘å™¨">Vue3ç¼–è¯‘å™¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/å‰ç«¯æ¡†æ¶/03è™šæ‹ŸDOM">è™šæ‹ŸDOM</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/å‰ç«¯æ¡†æ¶/04Vue3-Reactivity">Vue3-Reactivity</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/å‰ç«¯æ¡†æ¶/05Mini-Vue">Mini-Vue</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/å‰ç«¯æ¡†æ¶/06Vue3å…¶ä»–">Vue3å…¶ä»–</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/UIç»„ä»¶åº“/">UIç»„ä»¶åº“</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/æ•°æ®ç›¸å…³/">æ•°æ®ç›¸å…³</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/åç«¯å‚¨å¤‡/">åç«¯å‚¨å¤‡</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/åç«¯å‚¨å¤‡/Djangoè¿›é˜¶å­¦ä¹ ç¬”è®°">Djangoè¿›é˜¶å­¦ä¹ ç¬”è®°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/çŸ¥è¯†åº“/åç«¯å‚¨å¤‡/DRFå­¦ä¹ ç¬”è®°">DRFå­¦ä¹ ç¬”è®°</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#restfulä»‹ç»">restfulä»‹ç»</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#djangoåŸºç¡€å¤ä¹ ">djangoåŸºç¡€å¤ä¹ </a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#åºåˆ—åŒ–å™¨">åºåˆ—åŒ–å™¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ååºåˆ—åŒ–å™¨">ååºåˆ—åŒ–å™¨</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ååºåˆ—åŒ–">ååºåˆ—åŒ–</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ•°æ®å…¥åº“">æ•°æ®å…¥åº“</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#modelserializer">ModelSerializer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¸€çº§è§†å›¾apiview">ä¸€çº§è§†å›¾APIView</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#äºŒçº§è§†å›¾ä¸mixin">äºŒçº§è§†å›¾ä¸Mixin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¸‰çº§è§†å›¾ä¸è§†å›¾é›†">ä¸‰çº§è§†å›¾ä¸è§†å›¾é›†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è§†å›¾é›†é¢å¤–åŠ¨ä½œ">è§†å›¾é›†é¢å¤–åŠ¨ä½œ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#router">router</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æƒé™è®¾ç½®">æƒé™è®¾ç½®</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#urlå¯é€‰å‚æ•°è®¾ç½®">urlå¯é€‰å‚æ•°è®¾ç½®</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å…¶ä»–">å…¶ä»–</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/åç«¯å‚¨å¤‡/Rediså­¦ä¹ ç¬”è®°">Rediså­¦ä¹ ç¬”è®°</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/AIç›¸å…³/">AIç›¸å…³</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/çŸ¥è¯†åº“/AIç›¸å…³/TFIDFè®¡ç®—çš„å­¦ä¹ ">TFIDFè®¡ç®—çš„å­¦ä¹ </a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="drfå­¦ä¹ ç¬”è®°" tabindex="-1">DRFå­¦ä¹ ç¬”è®° <a class="header-anchor" href="#drfå­¦ä¹ ç¬”è®°" aria-hidden="true">#</a></h1><h2 id="restfulä»‹ç»" tabindex="-1">restfulä»‹ç» <a class="header-anchor" href="#restfulä»‹ç»" aria-hidden="true">#</a></h2><h4 id="_1-webåº”ç”¨æ¨¡å¼-äº†è§£" tabindex="-1">1,webåº”ç”¨æ¨¡å¼(äº†è§£) <a class="header-anchor" href="#_1-webåº”ç”¨æ¨¡å¼-äº†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: çŸ¥é“webå¼€å‘çš„ä¸¤ç§æ¨¡å¼</p></li><li><p>å‰åç«¯åˆ†ç¦»:</p><ul><li>æ³¨æ„ç‚¹: ä¸šåŠ¡æœåŠ¡å™¨å’Œé™æ€æœåŠ¡å™¨æ˜¯åˆ†å¼€çš„</li><li><img src="https://webplus-cn-shenzhen-s-6130b804f968dd14cecc43e2.oss-cn-shenzhen.aliyuncs.com/blogs/image-20191217085007969.png" alt="image-20191217085007969"></li></ul></li><li><p>å‰åç«¯ä¸åˆ†ç¦»:</p><ul><li>æ³¨æ„ç‚¹: é¡µé¢å’Œæ•°æ®éƒ½æ˜¯æœ‰åç«¯å¤„ç†çš„</li><li><img src="https://webplus-cn-shenzhen-s-6130b804f968dd14cecc43e2.oss-cn-shenzhen.aliyuncs.com/blogs/image-20191217085558447.png" alt="image-20191217085558447"></li></ul></li></ul><h4 id="_2-restfulé£æ ¼ä»‹ç»-äº†è§£" tabindex="-1">2,restfulé£æ ¼ä»‹ç»(äº†è§£) <a class="header-anchor" href="#_2-restfulé£æ ¼ä»‹ç»-äº†è§£" aria-hidden="true">#</a></h4><ul><li>ç›®çš„: çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨restfulé£æ ¼è¿›è¡Œå¼€å‘</li><li>åŸå›  <ul><li>æ¯ä¸ªåç«¯å¼€å‘äººå‘˜å¯èƒ½éƒ½æœ‰è‡ªå·±çš„å®šä¹‰æ–¹å¼ï¼Œé£æ ¼è¿¥å¼‚</li></ul></li><li>è§£å†³åŠæ³•: <ul><li>restful</li></ul></li></ul><h4 id="_3-restfulè®¾è®¡é£æ ¼-äº†è§£" tabindex="-1">3,restfulè®¾è®¡é£æ ¼(äº†è§£) <a class="header-anchor" href="#_3-restfulè®¾è®¡é£æ ¼-äº†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: çŸ¥é“å¸¸è§çš„restfulé£æ ¼çš„æ ‡å‡†</p></li><li><p>å…·ä½“çš„æ ‡å‡†:</p><ul><li><p>apiéƒ¨ç½²çš„åŸŸå, ä¸»åŸŸåæˆ–è€…ä¸“æœ‰åŸŸå</p><blockquote><p>æŠŠAPIéƒ¨ç½²åœ¨ä¸“æœ‰åŸŸåä¹‹ä¸‹</p></blockquote><div class="language-"><pre><code>https://api.example.com //ä¸æ˜¯wwwå¼€å¤´çš„
</code></pre></div><blockquote><p>éƒ¨ç½²åœ¨ä¸»åŸŸåä¹‹ä¸‹</p></blockquote><div class="language-"><pre><code>åŸŸå/api/
</code></pre></div></li><li><p>ç‰ˆæœ¬, é€šè¿‡urlåœ°å€æˆ–è€…è¯·æ±‚å¤´accept</p><blockquote><p>åº”è¯¥æŠŠç‰ˆæœ¬å·æ”¾åœ¨URLä¸­</p></blockquote></li><li><p>è·¯å¾„, åªèƒ½æœ‰åè¯, ä¸èƒ½æœ‰åŠ¨è¯</p><div class="language-"><pre><code>//ä¸æ˜¯&#39;/getProducts&#39;

GET /products ï¼šå°†è¿”å›æ‰€æœ‰äº§å“æ¸…å•
POST /products ï¼šå°†äº§å“æ–°å»ºåˆ°é›†åˆ
GET /products/4 ï¼šå°†è·å–äº§å“ 4
PATCHï¼ˆæˆ–ï¼‰PUT /products/4 ï¼šå°†æ›´æ–°äº§å“ 4
</code></pre></div></li><li><p>httpè¯·æ±‚åŠ¨è¯, get, post, update, delete</p><div class="language-"><pre><code>GETï¼ˆSELECTï¼‰ï¼šä»æœåŠ¡å™¨å–å‡ºèµ„æºï¼ˆä¸€é¡¹æˆ–å¤šé¡¹ï¼‰ã€‚
POSTï¼ˆCREATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æºã€‚
PUTï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜åçš„å®Œæ•´èµ„æºï¼‰ã€‚
DELETEï¼ˆDELETEï¼‰ï¼šä»æœåŠ¡å™¨åˆ é™¤èµ„æº
</code></pre></div></li><li><p>è¿‡æ»¤ä¿¡æ¯</p><p>å¦‚æœè®°å½•æ•°é‡å¾ˆå¤šï¼ŒæœåŠ¡å™¨ä¸å¯èƒ½éƒ½å°†å®ƒä»¬è¿”å›ç»™ç”¨æˆ·ã€‚APIåº”è¯¥æä¾›å‚æ•°ï¼Œè¿‡æ»¤è¿”å›ç»“æœã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„å‚æ•°ã€‚</p><div class="language-"><pre><code>?limit=10ï¼šæŒ‡å®šè¿”å›è®°å½•çš„æ•°é‡
?offset=10ï¼šæŒ‡å®šè¿”å›è®°å½•çš„å¼€å§‹ä½ç½®ã€‚
?page=2&amp;per_page=100ï¼šæŒ‡å®šç¬¬å‡ é¡µï¼Œä»¥åŠæ¯é¡µçš„è®°å½•æ•°ã€‚
?sortby=name&amp;order=ascï¼šæŒ‡å®šè¿”å›ç»“æœæŒ‰ç…§å“ªä¸ªå±æ€§æ’åºï¼Œä»¥åŠæ’åºé¡ºåºã€‚
?animal_type_id=1ï¼šæŒ‡å®šç­›é€‰æ¡ä»¶
</code></pre></div><blockquote><p>å‚æ•°çš„è®¾è®¡å…è®¸å­˜åœ¨å†—ä½™ï¼Œå³å…è®¸APIè·¯å¾„å’ŒURLå‚æ•°å¶å°”æœ‰é‡å¤ã€‚æ¯”å¦‚ï¼ŒGET /zoos/ID/animals ä¸ GET /animals?zoo_id=ID çš„å«ä¹‰æ˜¯ç›¸åŒçš„ã€‚</p></blockquote></li><li><p>çŠ¶æ€, 200, 201, 204, 400, 401, 403, 404</p><div class="language-"><pre><code>200 OK - [GET]ï¼šæœåŠ¡å™¨æˆåŠŸè¿”å›ç”¨æˆ·è¯·æ±‚çš„æ•°æ®
201 CREATED - [POST/PUT/PATCH]ï¼šç”¨æˆ·æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸã€‚
202 Accepted - [*]ï¼šè¡¨ç¤ºä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰
204 NO CONTENT - [DELETE]ï¼šç”¨æˆ·åˆ é™¤æ•°æ®æˆåŠŸã€‚
400 INVALID REQUEST - [POST/PUT/PATCH]ï¼šç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œ
401 Unauthorized - [*]ï¼šè¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰ã€‚
403 Forbidden - [*] è¡¨ç¤ºç”¨æˆ·å¾—åˆ°æˆæƒï¼ˆä¸401é”™è¯¯ç›¸å¯¹ï¼‰ï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚
404 NOT FOUND - [*]ï¼šç”¨æˆ·å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚
406 Not Acceptable - [GET]ï¼šç”¨æˆ·è¯·æ±‚çš„æ ¼å¼ä¸å¯å¾—ï¼ˆæ¯”å¦‚ç”¨æˆ·è¯·æ±‚JSONæ ¼å¼ï¼Œä½†æ˜¯åªæœ‰XMLæ ¼å¼ï¼‰ã€‚
410 Gone -[GET]ï¼šç”¨æˆ·è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„ã€‚
422 Unprocesable entity - [POST/PUT/PATCH] å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚
500 INTERNAL SERVER ERROR - [*]ï¼šæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œç”¨æˆ·å°†æ— æ³•åˆ¤æ–­å‘å‡ºçš„è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚
</code></pre></div></li><li><p>é”™è¯¯å¤„ç†</p><p>å¦‚æœçŠ¶æ€ç æ˜¯4xxï¼ŒæœåŠ¡å™¨å°±åº”è¯¥å‘ç”¨æˆ·è¿”å›å‡ºé”™ä¿¡æ¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿”å›çš„ä¿¡æ¯ä¸­å°†errorä½œä¸ºé”®åï¼Œå‡ºé”™ä¿¡æ¯ä½œä¸ºé”®å€¼å³å¯ã€‚</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
    error<span class="token operator">:</span> <span class="token string">&quot;Invalid API key&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>è¿”å›ç»“æœ</p><p>é’ˆå¯¹ä¸åŒæ“ä½œï¼ŒæœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›çš„ç»“æœåº”è¯¥ç¬¦åˆä»¥ä¸‹è§„èŒƒã€‚</p><ul><li>GET /collectionï¼šè¿”å›èµ„æºå¯¹è±¡çš„åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰</li><li>GET /collection/resourceï¼šè¿”å›å•ä¸ªèµ„æºå¯¹è±¡</li><li>POST /collectionï¼šè¿”å›æ–°ç”Ÿæˆçš„èµ„æºå¯¹è±¡</li><li>PUT /collection/resourceï¼šè¿”å›å®Œæ•´çš„èµ„æºå¯¹è±¡</li><li>PATCH /collection/resourceï¼šè¿”å›å®Œæ•´çš„èµ„æºå¯¹è±¡</li><li>DELETE /collection/resourceï¼šè¿”å›ä¸€ä¸ªç©ºæ–‡æ¡£</li></ul></li><li><p>å…¶ä»–</p><p>è¿”å›çš„æ•°æ®æ ¼å¼åº”è¯¥ä½¿ç”¨jsonï¼Œé¿å…ä½¿ç”¨xml</p></li></ul></li></ul><h2 id="djangoåŸºç¡€å¤ä¹ " tabindex="-1">djangoåŸºç¡€å¤ä¹  <a class="header-anchor" href="#djangoåŸºç¡€å¤ä¹ " aria-hidden="true">#</a></h2><h4 id="_4-restfulæ¡ˆä¾‹-äº†è§£" tabindex="-1">4,restfulæ¡ˆä¾‹(äº†è§£) <a class="header-anchor" href="#_4-restfulæ¡ˆä¾‹-äº†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨restfulé£æ ¼è®¾è®¡å›¾ä¹¦å¢åˆ æ”¹æŸ¥çš„æ¡ˆä¾‹</p></li><li><p>æ¡ˆä¾‹:</p><table><thead><tr><th>åŠŸèƒ½</th><th>è·¯å¾„</th><th>è¯·æ±‚æ–¹å¼</th><th>å“åº”çŠ¶æ€ç </th></tr></thead><tbody><tr><td>è·å–æ‰€æœ‰çš„ä¹¦ç±</td><td>/books</td><td>get</td><td>200</td></tr><tr><td>åˆ›å»ºä¹¦ç±</td><td>/books</td><td>post</td><td>201</td></tr><tr><td>è·å–å•ä¸ªä¹¦ç±</td><td id="">/books/</td><td>get</td><td>200</td></tr><tr><td>ä¿®æ”¹ä¹¦ç±</td><td id="">/books/</td><td>put</td><td>201</td></tr><tr><td>åˆ é™¤ä¹¦ç±</td><td id="">/books/</td><td>delete</td><td>204</td></tr></tbody></table></li></ul><h4 id="_5-æ•°æ®å‡†å¤‡" tabindex="-1">5,æ•°æ®å‡†å¤‡ <a class="header-anchor" href="#_5-æ•°æ®å‡†å¤‡" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å°†å›¾ä¹¦å’Œè‹±é›„çš„ä¿¡æ¯æ·»åŠ åˆ°æ•°æ®ä¸­</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åˆ›å»ºé¡¹ç›®, åˆ›å»ºbookå­åº”ç”¨</p></li><li><p>2, åœ¨å­åº”ç”¨ä¸­å®šä¹‰æ¨¡å‹ç±»</p><div class="language-python"><pre><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token comment"># å®šä¹‰å›¾ä¹¦æ¨¡å‹ç±»BookInfo</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    btitle <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;åç§°&#39;</span><span class="token punctuation">)</span>
    bpub_date <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&#39;å‘å¸ƒæ—¥æœŸ&#39;</span><span class="token punctuation">)</span>
    bread <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;é˜…è¯»é‡&#39;</span><span class="token punctuation">)</span>
    bcomment <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;è¯„è®ºé‡&#39;</span><span class="token punctuation">)</span>
    is_delete <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;é€»è¾‘åˆ é™¤&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        db_table <span class="token operator">=</span> <span class="token string">&#39;tb_books&#39;</span>  <span class="token comment"># æŒ‡æ˜æ•°æ®åº“è¡¨å</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&#39;å›¾ä¹¦&#39;</span>  <span class="token comment"># åœ¨adminç«™ç‚¹ä¸­æ˜¾ç¤ºçš„åç§°</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name  <span class="token comment"># æ˜¾ç¤ºçš„å¤æ•°åç§°</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;å®šä¹‰æ¯ä¸ªæ•°æ®å¯¹è±¡çš„æ˜¾ç¤ºä¿¡æ¯&quot;&quot;&quot;</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>btitle

<span class="token comment"># å®šä¹‰è‹±é›„æ¨¡å‹ç±»HeroInfo</span>
<span class="token keyword">class</span> <span class="token class-name">HeroInfo</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    GENDER_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;male&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;female&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    hname <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;åç§°&#39;</span><span class="token punctuation">)</span>
    hgender <span class="token operator">=</span> models<span class="token punctuation">.</span>SmallIntegerField<span class="token punctuation">(</span>choices<span class="token operator">=</span>GENDER_CHOICES<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;æ€§åˆ«&#39;</span><span class="token punctuation">)</span>
    hcomment <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;æè¿°ä¿¡æ¯&#39;</span><span class="token punctuation">)</span>
    hbook <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>BookInfo<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;å›¾ä¹¦&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># å¤–é”®</span>
    is_delete <span class="token operator">=</span> models<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;é€»è¾‘åˆ é™¤&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        db_table <span class="token operator">=</span> <span class="token string">&#39;tb_heros&#39;</span>
        verbose_name <span class="token operator">=</span> <span class="token string">&#39;è‹±é›„&#39;</span>
        verbose_name_plural <span class="token operator">=</span> verbose_name

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>hname
</code></pre></div></li><li><p>3, æ³¨å†Œå­åº”ç”¨, è®¾ç½®æ•°æ®åº“é…ç½®</p></li><li><p>4, åˆ›å»ºæ•°æ®åº“, è¿ç§»</p></li></ul></li></ul><h4 id="_6-æŸ¥è¯¢æ‰€æœ‰æ•°æ®-ç†è§£" tabindex="-1">6,æŸ¥è¯¢æ‰€æœ‰æ•°æ®(ç†è§£) <a class="header-anchor" href="#_6-æŸ¥è¯¢æ‰€æœ‰æ•°æ®-ç†è§£" aria-hidden="true">#</a></h4><blockquote><p>æŸ¥è¯¢å’Œåˆ›å»ºéƒ½å±äºåˆ—è¡¨è§†å›¾ï¼Œè€Œä»£å¸¦å‚æ•°çš„è¯·æ±‚å±äºè¯¦æƒ…è§†å›¾</p></blockquote><ul><li><p>ç›®çš„: å¯ä»¥ç¼–å†™è§†å›¾æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±ä¿¡æ¯</p></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>http.JsonResponse(books_list,safe=<strong>False</strong>) <ul><li>safe=Falseå…è®¸éå­—å…¸æ•°æ®å¯ä»¥è¢«è¿”å›</li></ul></li></ul></li><li><p>ä»£ç </p><div class="language-python"><pre><code><span class="token comment"># /book/views.py</span>
<span class="token comment"># åˆ—è¡¨è§†å›¾</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&#39;&#39;&#39;è·å–æ‰€æœ‰ä¹¦ç±&#39;&#39;&#39;</span>
        <span class="token comment"># 1.æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±</span>
        books <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 2.æ•°æ®è½¬æ¢</span>
        book_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> book <span class="token keyword">in</span> books<span class="token punctuation">:</span>
            book_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token string">&#39;id&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span>
                <span class="token string">&#39;btitle&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>btitle<span class="token punctuation">,</span>
                <span class="token string">&#39;bpub_date&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bpub_date<span class="token punctuation">,</span>
                <span class="token string">&#39;bread&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bread<span class="token punctuation">,</span>
                <span class="token string">&#39;bcomment&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bcomment<span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
            book_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>book_dict<span class="token punctuation">)</span>

        <span class="token comment"># 3.è¿”å›å“åº”</span>
        <span class="token comment"># safe=Falseå¯ä»¥å®‰å…¨è¿”å›éå­—å…¸</span>
        <span class="token comment"># json_dumps_params={&#39;ensure_ascii&#39;: False}å¯ä»¥è§£å†³è¿”å›çš„ä¸­æ–‡æ•°æ®ä¸ºä¹±ç </span>
        <span class="token keyword">return</span> http<span class="token punctuation">.</span>JsonResponse<span class="token punctuation">(</span>book_list<span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> json_dumps_params<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;ensure_ascii&#39;</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    
other<span class="token punctuation">:</span>
<span class="token comment"># /book/urls</span>
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">&#39;books/&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>BookInfoView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
<span class="token comment"># /project/urls</span>
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">&#39;admin/&#39;</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&#39;book.urls&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div></li></ul><h4 id="_7-åˆ›å»ºå¯¹è±¡-ç†è§£" tabindex="-1">7,åˆ›å»ºå¯¹è±¡(ç†è§£) <a class="header-anchor" href="#_7-åˆ›å»ºå¯¹è±¡-ç†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥æ·»åŠ ä¹¦ç±å¯¹è±¡åˆ°æ•°æ®åº“ä¸­</p></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>book = BookInfo.objects.create(**data_dict)</li></ul></li><li><p>å®Œæ•´ä»£ç </p><div class="language-python"><pre><code><span class="token comment"># è¯·æ±‚çš„æ—¶å€™åªéœ€è¦ä¿®æ”¹æ¸…è¯·æ±‚æ–¹å¼å°±å¯ä»¥äº†ï¼Œè¯·æ±‚è·¯å¾„æ˜¯ä¸å˜çš„</span>
<span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;åˆ›å»ºå•æœ¬ä¹¦ç±&#39;&#39;&#39;</span>
    <span class="token comment"># 1.è·å–å‚æ•°,æŠŠjsonè½¬æ¢ä¸ºå­—å…¸</span>
    dict_data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    btitle <span class="token operator">=</span> dict_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;btitle&#39;</span><span class="token punctuation">)</span>
    bpub_date <span class="token operator">=</span> dict_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;bpub_date&#39;</span><span class="token punctuation">)</span>
    bread <span class="token operator">=</span> dict_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;bread&#39;</span><span class="token punctuation">)</span>
    bcomment <span class="token operator">=</span> dict_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;bcomment&#39;</span><span class="token punctuation">)</span>
    <span class="token comment"># 2.æ ¡éªŒå‚æ•°(çœç•¥)</span>

    <span class="token comment"># 3.æ•°æ®å…¥åº“</span>
    book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span>dict_data<span class="token punctuation">)</span>
    <span class="token comment"># 4.è¿”å›å“åº”</span>
    book_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&#39;id&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span>
        <span class="token string">&#39;btitle&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>btitle<span class="token punctuation">,</span>
        <span class="token string">&#39;bpub_date&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bpub_date<span class="token punctuation">,</span>
        <span class="token string">&#39;bread&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bread<span class="token punctuation">,</span>
        <span class="token string">&#39;bcomment&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bcomment<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span>JsonResponse<span class="token punctuation">(</span>book_dict<span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="_8-è·å–å•ä¸ªå¯¹è±¡-ç†è§£" tabindex="-1">8,è·å–å•ä¸ªå¯¹è±¡(ç†è§£) <a class="header-anchor" href="#_8-è·å–å•ä¸ªå¯¹è±¡-ç†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥è·å–æŒ‡å®šä¹¦ç±å¯¹è±¡</p></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>book = BookInfo.objects.get(id=book_id)</li></ul></li><li><p>å®Œæ•´ä»£ç </p><div class="language-python"><pre><code><span class="token comment"># è¯¦æƒ…è§†å›¾</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoDetailView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 1.é€šè¿‡pkè·å–å¯¹è±¡</span>
        book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>pk<span class="token punctuation">)</span>
        <span class="token comment"># 2.è½¬æ¢æ•°æ®</span>
        book_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;id&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span>
            <span class="token string">&#39;btitle&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>btitle<span class="token punctuation">,</span>
            <span class="token string">&#39;bpub_date&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bpub_date<span class="token punctuation">,</span>
            <span class="token string">&#39;bread&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bread<span class="token punctuation">,</span>
            <span class="token string">&#39;bcomment&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bcomment<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token comment"># 3.è¿”å›å“åº”</span>
        <span class="token keyword">return</span> http<span class="token punctuation">.</span>JsonResponse<span class="token punctuation">(</span>book_dict<span class="token punctuation">)</span>
    
<span class="token comment"># æ³¨æ„è¿™é‡Œçš„urlâ€”â€”path</span>
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">&#39;^books/$&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>BookInfoView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">&#39;^books/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>BookInfoDetailView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
<span class="token comment"># å…¶ä¸­^ä»£è¡¨èµ·å§‹ç¬¦ï¼Œ$ä»£è¡¨ç»“æŸç¬¦</span>
</code></pre></div></li></ul><h4 id="_9-ä¿®æ”¹å•ä¸ªå¯¹è±¡-ç†è§£" tabindex="-1">9,ä¿®æ”¹å•ä¸ªå¯¹è±¡(ç†è§£) <a class="header-anchor" href="#_9-ä¿®æ”¹å•ä¸ªå¯¹è±¡-ç†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä¿®æ”¹æŒ‡å®šä¹¦ç±å¯¹è±¡</p></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>BookInfo.objects.filter(id=book_id).update(**data_dict)</li></ul></li><li><p>å®Œæ•´ä»£ç </p><div class="language-python"><pre><code><span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 1.è·å–å‚æ•°</span>
    dict_data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>pk<span class="token punctuation">)</span>
    <span class="token comment"># 2.æ ¡éªŒå‚æ•°</span>

    <span class="token comment"># 3.æ•°æ®å…¥åº“</span>
    BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>pk<span class="token operator">=</span>pk<span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token operator">**</span>dict_data<span class="token punctuation">)</span>
    <span class="token comment"># æŠŠæ›´æ–°ä¹‹åçš„æ•°æ®æ‹¿å‡ºæ¥è¿”å›</span>
    book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>pk<span class="token punctuation">)</span>
    book_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&#39;id&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span>
        <span class="token string">&#39;btitle&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>btitle<span class="token punctuation">,</span>
        <span class="token string">&#39;bpub_date&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bpub_date<span class="token punctuation">,</span>
        <span class="token string">&#39;bread&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bread<span class="token punctuation">,</span>
        <span class="token string">&#39;bcomment&#39;</span><span class="token punctuation">:</span> book<span class="token punctuation">.</span>bcomment<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 4.è¿”å›å“åº”</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span>JsonResponse<span class="token punctuation">(</span>book_dict<span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token number">201</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="_10-åˆ é™¤å•ä¸ªå¯¹è±¡-ç†è§£" tabindex="-1">10,åˆ é™¤å•ä¸ªå¯¹è±¡(ç†è§£) <a class="header-anchor" href="#_10-åˆ é™¤å•ä¸ªå¯¹è±¡-ç†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥åˆ é™¤æŒ‡å®šä¹¦ç±å¯¹è±¡</p></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>BookInfo.objects.get(id=book_id).delete()</li></ul></li><li><p>ä»£ç </p></li><li><div class="language-python"><pre><code><span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 1.è·å–æ•°æ®</span>
    book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>pk<span class="token punctuation">)</span>
    <span class="token comment"># 2.åˆ é™¤æ•°æ®</span>
    book<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 3.è¿”å›å“åº”</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span>HttpResponse<span class="token punctuation">(</span>status<span class="token operator">=</span><span class="token number">204</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h2 id="åºåˆ—åŒ–å™¨" tabindex="-1">åºåˆ—åŒ–å™¨ <a class="header-anchor" href="#åºåˆ—åŒ–å™¨" aria-hidden="true">#</a></h2><h4 id="_12-åºåˆ—åŒ–å™¨æ¦‚è¿°-äº†è§£" tabindex="-1">12,åºåˆ—åŒ–å™¨æ¦‚è¿°(äº†è§£) <a class="header-anchor" href="#_12-åºåˆ—åŒ–å™¨æ¦‚è¿°-äº†è§£" aria-hidden="true">#</a></h4><ul><li>ç›®çš„: çŸ¥é“åºåˆ—åŒ–å™¨çš„ä½œç”¨</li><li>åºåˆ—åŒ–å™¨çš„ä½œç”¨: <ul><li>1, ååºåˆ—åŒ–: æŠŠjson(dict), è½¬æˆæ¨¡å‹ç±»å¯¹è±¡ (æ ¡éªŒ,å…¥åº“)</li><li>2, åºåˆ—åŒ–: å°†æ¨¡å‹ç±»å¯¹è±¡, è½¬æˆjson(dict)æ•°æ®</li></ul></li></ul><h4 id="_13-åºåˆ—åŒ–å™¨å®šä¹‰-æŒæ¡" tabindex="-1">13,åºåˆ—åŒ–å™¨å®šä¹‰(æŒæ¡) <a class="header-anchor" href="#_13-åºåˆ—åŒ–å™¨å®šä¹‰-æŒæ¡" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å®šä¹‰ä¹¦ç±çš„åºåˆ—åŒ–å™¨</p></li><li><p>æ“ä½œæµç¨‹:</p><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers
<span class="token triple-quoted-string string">&quot;&quot;&quot;
å®šä¹‰åºåˆ—åŒ–å™¨:
1, å®šä¹‰ç±», ç»§æ‰¿è‡ªSerializer
2, ç¼–å†™å­—æ®µåç§°, å’Œæ¨¡å‹ç±»ä¸€æ ·
3, ç¼–å†™å­—æ®µç±»å‹, å’Œæ¨¡å‹ç±»ä¸€æ ·
4, ç¼–å†™å­—æ®µé€‰é¡¹, å’Œæ¨¡å‹ç±»ä¸€æ ·
    read_only: åªè¯»
    label: å­—æ®µè¯´æ˜

åºåˆ—åŒ–å™¨ä½œç”¨:
1, ååºåˆ—åŒ–: å°†json(dict)æ•°æ®, è½¬æˆæ¨¡å‹ç±»å¯¹è±¡
    â‘ : æ ¡éªŒ
    â‘¡: å…¥åº“
    
2, åºåˆ—åŒ–: å°†æ¨¡å‹ç±»å¯¹è±¡, è½¬æˆjson(dict)æ•°æ®
&quot;&quot;&quot;</span><span class="token string">&quot;&quot;</span>
<span class="token comment">#1,å®šä¹‰ä¹¦ç±åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;ä¹¦ç±ç¼–å·&quot;</span><span class="token punctuation">)</span>
    btitle <span class="token operator">=</span> serializers<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;åç§°&quot;</span><span class="token punctuation">)</span>
    bpub_date <span class="token operator">=</span> serializers<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&quot;å‘å¸ƒæ—¥æœŸ&quot;</span><span class="token punctuation">)</span>
    bread <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;é˜…è¯»é‡&quot;</span><span class="token punctuation">)</span>
    bcomment <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;è¯„è®ºé‡&quot;</span><span class="token punctuation">)</span>
    is_delete <span class="token operator">=</span> serializers<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;é€»è¾‘åˆ é™¤&quot;</span><span class="token punctuation">)</span>

</code></pre></div></li></ul><h4 id="_14-åºåˆ—åŒ–å™¨-åºåˆ—åŒ–å•ä¸ªå¯¹è±¡-æŒæ¡" tabindex="-1">14,åºåˆ—åŒ–å™¨,åºåˆ—åŒ–å•ä¸ªå¯¹è±¡(æŒæ¡) <a class="header-anchor" href="#_14-åºåˆ—åŒ–å™¨-åºåˆ—åŒ–å•ä¸ªå¯¹è±¡-æŒæ¡" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å°†å•æœ¬æ•°æ®ä½¿ç”¨åºåˆ—åŒ–å™¨, è½¬æˆjson(dict)æ•°æ®</p></li><li><p>æ“ä½œæµç¨‹:</p><div class="language-python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo
<span class="token keyword">from</span> book<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,è·å–ä¹¦ç±å¯¹è±¡</span>
book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡, instance=book è¡¨ç¤ºå°†å“ªä¸€æœ¬æ•°æ®è¿›è¡Œåºåˆ—åŒ–</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">)</span>

<span class="token comment">#3,è¾“å‡ºåºåˆ—åŒ–ä¹‹åçš„ç»“æœ</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
{&#39;id&#39;: 1, &#39;btitle&#39;: &#39;å°„é›•è‹±é›„ä¼ &#39;, &#39;bpub_date&#39;: &#39;1980-05-01&#39;, &#39;bread&#39;: 12, &#39;bcomment&#39;: 34, &#39;is_delete&#39;: False}
&quot;&quot;&quot;</span>
</code></pre></div></li></ul><h4 id="_15-åºåˆ—åŒ–å™¨-åºåˆ—åŒ–åˆ—è¡¨æ•°æ®-æŒæ¡" tabindex="-1">15,åºåˆ—åŒ–å™¨,åºåˆ—åŒ–åˆ—è¡¨æ•°æ®(æŒæ¡) <a class="header-anchor" href="#_15-åºåˆ—åŒ–å™¨-åºåˆ—åŒ–åˆ—è¡¨æ•°æ®-æŒæ¡" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨åºåˆ—åŒ–å™¨,å¯¹åˆ—è¡¨ä¸­çš„å¤šä¸ªå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–</p></li><li><p>æ“ä½œæµç¨‹:</p><div class="language-python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo
<span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±</span>
books <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡,many=True è¡¨ç¤ºä¼ å…¥çš„æ˜¯åˆ—è¡¨å¯¹è±¡(å¤šä¸ªæ•°æ®)</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>books<span class="token punctuation">,</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment">#3,è¾“å‡ºåºåˆ—åŒ–çš„ç»“æœ</span>
serializer<span class="token punctuation">.</span>data
<span class="token triple-quoted-string string">&quot;&quot;&quot;
[
OrderedDict([(&#39;id&#39;, 1), (&#39;btitle&#39;, &#39;å°„é›•è‹±é›„ä¼ &#39;), (&#39;bpub_date&#39;, &#39;1980-05-01&#39;), (&#39;bread&#39;, 12), (&#39;bcomment&#39;, 34), (&#39;is_delete&#39;, False)]), 
OrderedDict([(&#39;id&#39; (&#39;btitle&#39;, &#39;å¤©é¾™å…«éƒ¨&#39;), (&#39;bpub_date&#39;, &#39;1986-07-24&#39;), (&#39;bread&#39;, 36), (&#39;bcomment&#39;, 40), (&#39;is_delete&#39;, False)]), 
OrderedDict([(&#39;id&#39;, 3), (&#39;btitle&#39;, &#39;ç¬‘å‚²æ±Ÿæ¹–&#39;), (&#39;bp, &#39;1995-12-24&#39;), (&#39;bread&#39;, 20), (&#39;bcomment&#39;, 80), (&#39;is_delete&#39;, False)]), 
OrderedDict([(&#39;id&#39;, 4), (&#39;btitle&#39;, &#39;é›ªå±±é£ç‹&#39;), (&#39;bpub_date&#39;, &#39;1987-11-11&#39;), (&#39;bread&#39;, 58&#39;bcomment&#39;, 24), (&#39;is_delete&#39;, False)]), 
OrderedDict([(&#39;id&#39;, 6), (&#39;btitle&#39;, &#39;é‡‘ç“¶x2&#39;), (&#39;bpub_date&#39;, &#39;2019-01-01&#39;), (&#39;bread&#39;, 10), (&#39;bcomment&#39;, 5), (&#39;is_delete&#39;, Fse)])
]
&quot;&quot;&quot;</span>
<span class="token comment"># OrderedDict: æœ‰åºå­—å…¸</span>
</code></pre></div><p>æ³¨æ„ç‚¹:</p><ul><li>serializer = BookSerializer(instance=books,many=True)</li><li>instance: éœ€è¦åºåˆ—åŒ–çš„å¯¹è±¡</li><li>many=True: é»˜è®¤æ˜¯None, å¦‚æœä¼ å…¥True, éœ€è¦åºåˆ—åŒ–çš„å¯¹è±¡æ˜¯åˆ—è¡¨</li><li>serializer.data: è¡¨ç¤ºè¾“å‡ºåºåˆ—åŒ–ä¹‹åçš„ç»“æœ</li></ul></li></ul><h4 id="_16-è‹±é›„åºåˆ—åŒ–å™¨å…³è”å¤–é”®-æŒæ¡" tabindex="-1">16,è‹±é›„åºåˆ—åŒ–å™¨å…³è”å¤–é”®(æŒæ¡) <a class="header-anchor" href="#_16-è‹±é›„åºåˆ—åŒ–å™¨å…³è”å¤–é”®-æŒæ¡" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å°†å…³è”è‹±é›„çš„ä¹¦ç±ä¿¡æ¯, ä¸‰ç§å½¢å¼è¡¨ç¤ºå‡ºæ¥</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p><div class="language-python"><pre><code><span class="token comment">#2,å®šä¹‰è‹±é›„åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">HeroInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;è‹±é›„æ•°æ®åºåˆ—åŒ–å™¨&quot;&quot;&quot;</span>
    GENDER_CHOICES <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;male&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;female&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&#39;ID&#39;</span><span class="token punctuation">,</span> read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    hname <span class="token operator">=</span> serializers<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&#39;åå­—&#39;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
    hgender <span class="token operator">=</span> serializers<span class="token punctuation">.</span>ChoiceField<span class="token punctuation">(</span>choices<span class="token operator">=</span>GENDER_CHOICES<span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&#39;æ€§åˆ«&#39;</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    hcomment <span class="token operator">=</span> serializers<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&#39;æè¿°ä¿¡æ¯&#39;</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> allow_null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token comment">#1,æ·»åŠ å¤–é”®,ä¸»é”®è¡¨ç¤º å¿…é¡»æä¾›`queryset` é€‰é¡¹, æˆ–è€…è®¾ç½® read_only=`True`.</span>
    <span class="token comment"># queryset=BookInfo.objects.all()è¡¨ç¤ºæŠŠæ‰€æœ‰ä¹¦ç±å…¨éƒ¨æŸ¥å‡ºæ¥è®©ä»–è‡ªå·±å»åŒ¹é…ã€‚</span>
    
    <span class="token comment"># hbook = serializers.PrimaryKeyRelatedField(queryset=BookInfo.objects.all())</span>
    <span class="token comment"># hbook = serializers.PrimaryKeyRelatedField(read_only=True)</span>

    <span class="token comment">#2,æ·»åŠ å¤–é”®, æ¥è‡ªäºå…³è”æ¨¡å‹ç±», __str__çš„è¿”å›å€¼</span>
    <span class="token comment"># hbook = serializers.StringRelatedField(read_only=True)</span>

    <span class="token comment">#3,æ·»åŠ å¤–é”®,å…³è”å¦å¤–ä¸€ä¸ªåºåˆ—åŒ–å™¨ï¼Œè¿”å›æ•´æœ¬ä¹¦çš„å…¨éƒ¨ä¿¡æ¯ï¼ˆä¹¦å·²ç»å®šä¹‰å¥½åºåˆ—åŒ–å™¨ï¼‰</span>
    hbook <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>2, ç±»è§†å›¾</p><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot; ===============3, è‹±é›„åºåˆ—åŒ–å™¨, å…³è”å¤–é”® ================= &quot;&quot;&quot;</span><span class="token string">&quot;&quot;</span>
<span class="token keyword">from</span> book<span class="token punctuation">.</span>models <span class="token keyword">import</span> HeroInfo
<span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> HeroInfoSerializer

<span class="token comment">#1,è·å–å•ä¸ªè‹±é›„</span>
hero <span class="token operator">=</span> HeroInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">#2,åˆ›å»ºè‹±é›„åºåˆ—åŒ–å™¨</span>
serializer <span class="token operator">=</span> HeroInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>hero<span class="token punctuation">)</span>

<span class="token comment">#3,è¾“å‡ºç»“æœ</span>
serializer<span class="token punctuation">.</span>data

</code></pre></div></li></ul></li></ul><h4 id="_17-ä¹¦ç±åºåˆ—åŒ–å™¨-å…³è”many-æŒæ¡" tabindex="-1">17,ä¹¦ç±åºåˆ—åŒ–å™¨,å…³è”many(æŒæ¡) <a class="header-anchor" href="#_17-ä¹¦ç±åºåˆ—åŒ–å™¨-å…³è”many-æŒæ¡" aria-hidden="true">#</a></h4><ul><li><p>djangoå°å¤ä¹ :</p><div class="language-python"><pre><code><span class="token comment"># çŸ¥é“ä¸€ä¸ªè‹±é›„ï¼Œå¦‚ä½•æŸ¥å‡ºè¿™ä¸ªè‹±é›„æ‰€åœ¨çš„ä¹¦ç±</span>
hero <span class="token operator">=</span> HeroInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
hero<span class="token punctuation">.</span>hbook
<span class="token comment"># åè¿‡æ¥ï¼ŒçŸ¥é“ä¸€æœ¬ä¹¦ï¼Œå¦‚ä½•æŸ¥å‡ºè¿™æœ¬ä¹¦æ‰€å…³è”çš„æ‰€æœ‰è‹±é›„</span>
book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
book<span class="token punctuation">.</span>heroinfo_set
<span class="token comment"># æ‰€ä»¥åœ¨DRFä¹Ÿå·®ä¸å¤šæ˜¯è¿™æ ·å†™çš„</span>
</code></pre></div></li><li><p>ç›®çš„: å¯ä»¥åœ¨åºåˆ—åŒ–ä¹¦ç±çš„æ—¶å€™, å±•ç¤ºå…³è”çš„è‹±é›„çš„ä¿¡æ¯</p></li><li><p>æ“ä½œæµç¨‹:</p><div class="language-python"><pre><code><span class="token comment">#1,å®šä¹‰ä¹¦ç±åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#1,å…³è”è‹±é›„å­—æ®µ, åœ¨ä¸€æ–¹ä¸­,è¾“å‡ºå¤šæ–¹å†…å®¹çš„æ—¶å€™åŠ ä¸Šmany=True</span>
    <span class="token comment"># heroinfo_set = serializers.PrimaryKeyRelatedField(read_only=True,many=True)</span>
    heroinfo_set <span class="token operator">=</span> serializers<span class="token punctuation">.</span>StringRelatedField<span class="token punctuation">(</span>read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="ä½¿ç”¨åºåˆ—åŒ–å™¨æ”¹è¿›ä¹‹å‰djangoå†™çš„ä»£ç " tabindex="-1">ä½¿ç”¨åºåˆ—åŒ–å™¨æ”¹è¿›ä¹‹å‰djangoå†™çš„ä»£ç  <a class="header-anchor" href="#ä½¿ç”¨åºåˆ—åŒ–å™¨æ”¹è¿›ä¹‹å‰djangoå†™çš„ä»£ç " aria-hidden="true">#</a></h4><div class="language-python"><pre><code><span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;è·å–æ‰€æœ‰ä¹¦ç±&#39;&#39;&#39;</span>
    <span class="token comment"># 1.æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±</span>
    books <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 2.æ•°æ®è½¬æ¢</span>
    <span class="token comment"># book_list = []</span>
    <span class="token comment"># for book in books:</span>
    <span class="token comment">#     book_dict = {</span>
    <span class="token comment">#         &#39;id&#39;: book.id,</span>
    <span class="token comment">#         &#39;btitle&#39;: book.btitle,</span>
    <span class="token comment">#         &#39;bpub_date&#39;: book.bpub_date,</span>
    <span class="token comment">#         &#39;bread&#39;: book.bread,</span>
    <span class="token comment">#         &#39;bcomment&#39;: book.bcomment,</span>
    <span class="token comment">#     }</span>
    <span class="token comment">#     book_list.append(book_dict)</span>
    <span class="token comment"># TODO åºåˆ—å™¨æ”¹è¿›</span>
    serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>books<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>


    <span class="token comment"># 3.è¿”å›å“åº”</span>
    <span class="token comment"># safe=Falseå¯ä»¥å®‰å…¨è¿”å›éå­—å…¸</span>
    <span class="token comment"># json_dumps_params={&#39;ensure_ascii&#39;: False}å¯ä»¥è§£å†³è¿”å›çš„ä¸­æ–‡æ•°æ®ä¸ºä¹±ç </span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span>JsonResponse<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> json_dumps_params<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;ensure_ascii&#39;</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ååºåˆ—åŒ–å™¨" tabindex="-1">ååºåˆ—åŒ–å™¨ <a class="header-anchor" href="#ååºåˆ—åŒ–å™¨" aria-hidden="true">#</a></h2><h3 id="ååºåˆ—åŒ–" tabindex="-1">ååºåˆ—åŒ– <a class="header-anchor" href="#ååºåˆ—åŒ–" aria-hidden="true">#</a></h3><blockquote><p>æ ¡éªŒï¼š</p><ol><li>å­—æ®µç±»å‹æ ¡éªŒ</li><li>å­—æ®µé€‰é¡¹æ ¡éªŒ</li><li>å•å­—æ®µï¼Œæ ¡éªŒï¼ˆæ–¹æ³•ï¼‰</li><li>å¤šå­—æ®µæ ¡éªŒï¼ˆæ–¹æ³•ï¼‰</li><li>è‡ªå®šä¹‰æ ¡éªŒï¼ˆæ–¹æ³•ï¼‰</li></ol></blockquote><h4 id="_18-ååºåˆ—åŒ–-å­—æ®µç±»å‹æ ¡éªŒ" tabindex="-1">18,ååºåˆ—åŒ–-å­—æ®µç±»å‹æ ¡éªŒ <a class="header-anchor" href="#_18-ååºåˆ—åŒ–-å­—æ®µç±»å‹æ ¡éªŒ" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨åºåˆ—åŒ–å™¨,å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒæ“ä½œ</p></li><li><p>æ“ä½œæµç¨‹: serializer.is_valid(raise_exception=True)</p><div class="language-Python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é‡‘ç“¶x-æ’ç”»ç‰ˆ&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">25</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ, raise_exception=True, æ ¡éªŒä¸é€šè¿‡,æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯</span>
<span class="token comment"># ä¹Ÿå¯ä»¥ç›´æ¥æ‰“å°é”™è¯¯ä¿¡æ¯print(serializer.error_messages)</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="_19-ååºåˆ—åŒ–-å­—æ®µé€‰é¡¹æ ¡éªŒ" tabindex="-1">19,ååºåˆ—åŒ–-å­—æ®µé€‰é¡¹æ ¡éªŒ <a class="header-anchor" href="#_19-ååºåˆ—åŒ–-å­—æ®µé€‰é¡¹æ ¡éªŒ" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨åºåˆ—åŒ–å™¨,å¯¹æ•°æ®è¿›è¡Œé€‰é¡¹çº¦æŸæ ¡éªŒ</p></li><li><p>æ“ä½œæµç¨‹: serializer.is_valid(raise_exception=True)</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p><ul><li><p>min_value=0</p></li><li><p>max_value=50</p></li><li><p>required: é»˜è®¤å°±æ˜¯Trueï¼Œå¿…é¡»è¦ä¼ é€’ï¼Œé™¤éè®¾ç½®äº†default | false | read_only</p></li><li><p>æœ‰read_only=Trueï¼Œä¼šè¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œå¹¶ä¸”ååºåˆ—åŒ–æ—¶ä¸éœ€è¦ä¼ è¯¥å‚ä¹Ÿèƒ½æ ¡éªŒé€šè¿‡ï¼ˆä¸è¿›è¡Œååºåˆ—åŒ–ï¼‰</p></li><li><p>çº¦æŸæ¼”ç¤º</p></li><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    bread <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>min_value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;é˜…è¯»é‡&quot;</span><span class="token punctuation">)</span>
    bcomment <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>max_value<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;è¯„è®ºé‡&quot;</span><span class="token punctuation">)</span>
    is_delete <span class="token operator">=</span> serializers<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;é€»è¾‘åˆ é™¤&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é‡‘ç“¶x&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">99</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_20-ååºåˆ—åŒ–-å•å­—æ®µæ ¡éªŒ" tabindex="-1">20,ååºåˆ—åŒ–-å•å­—æ®µæ ¡éªŒ <a class="header-anchor" href="#_20-ååºåˆ—åŒ–-å•å­—æ®µæ ¡éªŒ" aria-hidden="true">#</a></h4><blockquote><p>åœ¨è°ƒç”¨is_vaildæ–¹æ³•çš„æ—¶å€™ï¼Œå®ƒä¼šè¿›å…¥ä½ ç¼–å†™çš„å•å­—æ®µæ£€éªŒæ–¹æ³•</p><p>å…¶ä¸­vaildata()ä»£è¡¨å¤šå­—æ®µæ ¡éªŒï¼Œè€Œåé¢è·Ÿä¸Šä¸‹åˆ’çº¿åŠ ä¸Šå­—æ®µåä¸ºæ–¹æ³•åçš„è¯ä»£è¡¨è¯¥æ–¹æ³•ä¸ºå•å­—æ®µæ ¡éªŒ</p><p>attrså°±æ˜¯ä¼ è¿‡æ¥çš„æ•°æ®ï¼šåœ¨è¿™é‡Œæ˜¯btitle</p></blockquote><ul><li><p>ç›®çš„: å¯ä»¥ç¼–å†™å•å­—æ®µæ ¡éªŒæ–¹æ³•, å¯¹btitleè¿›è¡Œæ ¡éªŒ</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#3, å•å­—æ®µæ ¡éªŒ, æ–¹æ³•; éœ€æ±‚: æ·»åŠ çš„ä¹¦ç±å¿…é¡»åŒ…å«&#39;é‡‘ç“¶&#39;</span>
    <span class="token keyword">def</span> <span class="token function">validate_btitle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;value = {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>attrs<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">#1,åˆ¤æ–­ä¼ å…¥çš„valueä¸­æ˜¯å¦åŒ…å«é‡‘ç“¶</span>
        <span class="token keyword">if</span> <span class="token string">&quot;é‡‘ç“¶&quot;</span> <span class="token keyword">not</span> <span class="token keyword">in</span> attrs<span class="token punctuation">:</span>
            <span class="token keyword">raise</span> serializers<span class="token punctuation">.</span>ValidationError<span class="token punctuation">(</span><span class="token string">&quot;ä¹¦åå¿…é¡»åŒ…å«é‡‘ç“¶&quot;</span><span class="token punctuation">)</span>

        <span class="token comment">#2,è¿”å›ç»“æœ</span>
        <span class="token keyword">return</span> attrs
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é‡‘ç“¶x&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>å•å­—æ®µæ ¡éªŒæ–¹æ³• <ul><li>def validate_==å­—æ®µå==(self,value): <ul><li>pass</li></ul></li></ul></li><li>å¦‚æœæ ¡éªŒä¸é€šè¿‡,ç›´æ¥æŠ›å‡ºå¼‚å¸¸å³å¯</li></ul></li></ul><h4 id="_21-ååºåˆ—åŒ–-å¤šå­—æ®µæ ¡éªŒ" tabindex="-1">21,ååºåˆ—åŒ–-å¤šå­—æ®µæ ¡éªŒ <a class="header-anchor" href="#_21-ååºåˆ—åŒ–-å¤šå­—æ®µæ ¡éªŒ" aria-hidden="true">#</a></h4><blockquote><p>è¿™é‡Œæ¥æ”¶çš„attrså°±æ˜¯ä¼ å…¥çš„æ•´ä¸ªå­—å…¸äº†</p></blockquote><ul><li><p>ç›®çš„: å¯ä»¥ç¼–å†™å¤šå­—æ®µæ ¡éªŒæ–¹æ³•, å¯¹é˜…è¯»é‡å’Œè¯„è®ºé‡è¿›è¡Œåˆ¤æ–­ï¼ˆä¸¤ä¸¤ä¹‹é—´æ¯”è¾ƒå¸¸ç”¨å¤šå­—æ®µæ ¡éªŒï¼‰</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#4,å¤šå­—æ®µæ ¡éªŒ, æ–¹æ³•; æ·»åŠ ä¹¦ç±çš„æ—¶å€™,è¯„è®ºé‡ä¸èƒ½å¤§äºé˜…è¯»é‡</span>
    <span class="token keyword">def</span> <span class="token function">validate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        :param attrs: å¤–ç•Œä¼ å…¥çš„éœ€è¦æ ¡éªŒçš„å­—å…¸
        :return:
        &quot;&quot;&quot;</span>
        <span class="token comment">#1,åˆ¤æ–­è¯„è®ºé‡å’Œé˜…è¯»é‡çš„å…³ç³»</span>
        <span class="token keyword">if</span> attrs<span class="token punctuation">[</span><span class="token string">&quot;bread&quot;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> attrs<span class="token punctuation">[</span><span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> serializers<span class="token punctuation">.</span>ValidationError<span class="token punctuation">(</span><span class="token string">&quot;è¯„è®ºé‡ä¸èƒ½å¤§äºé˜…è¯»é‡&quot;</span><span class="token punctuation">)</span>

        <span class="token comment">#2,è¿”å›ç»“æœ</span>
        <span class="token keyword">return</span> attrs
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot; ===============7, ååºåˆ—åŒ–-å¤šå­—æ®µæ ¡éªŒ ================= &quot;&quot;&quot;</span><span class="token string">&quot;&quot;</span>
<span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é‡‘ç“¶xxx&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">33</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">22</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_22-ååºåˆ—åŒ–-è‡ªå®šä¹‰æ ¡éªŒ-ç†è§£" tabindex="-1">22,ååºåˆ—åŒ–-è‡ªå®šä¹‰æ ¡éªŒ(ç†è§£) <a class="header-anchor" href="#_22-ååºåˆ—åŒ–-è‡ªå®šä¹‰æ ¡éªŒ-ç†è§£" aria-hidden="true">#</a></h4><blockquote><p>æŠŠè‡ªå®šä¹‰çš„æ ¡éªŒæ–¹æ³•ååŠ å…¥åˆ°å­—æ®µçš„é€‰é¡¹validatorsä¸­</p></blockquote><ul><li><p>ç›®çš„: å¯ä»¥è‡ªå®šä¹‰æ–¹æ³•,å¯¹æ—¥æœŸè¿›è¡Œæ ¡éªŒ</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token comment">#éœ€æ±‚: æ·»åŠ çš„ä¹¦ç±çš„æ—¥æœŸä¸èƒ½å°äº2015å¹´</span>
<span class="token keyword">def</span> <span class="token function">check_bpub_date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;date = {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> date<span class="token punctuation">.</span>year <span class="token operator">&lt;</span> <span class="token number">2015</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> serializers<span class="token punctuation">.</span>ValidationError<span class="token punctuation">(</span><span class="token string">&quot;æ—¥æœŸä¸èƒ½å°äº2015å¹´&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> date
  
<span class="token comment">#1,å®šä¹‰ä¹¦ç±åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    bpub_date <span class="token operator">=</span> serializers<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&quot;å‘å¸ƒæ—¥æœŸ&quot;</span><span class="token punctuation">,</span>validators<span class="token operator">=</span><span class="token punctuation">[</span>check_bpub_date<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot; ===============8, ååºåˆ—åŒ–-è‡ªå®šä¹‰æ ¡éªŒ ================= &quot;&quot;&quot;</span><span class="token string">&quot;&quot;</span>
<span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é‡‘ç“¶xxx&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2011-11-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

</code></pre></div></li></ul></li></ul></li></ul><h3 id="æ•°æ®å…¥åº“" tabindex="-1">æ•°æ®å…¥åº“ <a class="header-anchor" href="#æ•°æ®å…¥åº“" aria-hidden="true">#</a></h3><ol><li>åˆ›å»ºæ–°çš„å¯¹è±¡</li><li>æ›´æ–° å¯¹è±¡</li></ol><h4 id="_23-ååºåˆ—åŒ–-æ•°æ®å…¥åº“create-æŒæ¡" tabindex="-1">23,ååºåˆ—åŒ–-æ•°æ®å…¥åº“create(æŒæ¡) <a class="header-anchor" href="#_23-ååºåˆ—åŒ–-æ•°æ®å…¥åº“create-æŒæ¡" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å°†ä¹¦ç±å¯¹è±¡ä¿å­˜åˆ°æ•°æ®åº“ä¸­</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    
  <span class="token comment">#5,é‡å†™createæ–¹æ³•,å®ç°æ•°æ®å…¥åº“</span>
    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> validated_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># print(&quot;validated_data = {}&quot;.format(validated_data))</span>

        <span class="token comment">#1,åˆ›å»ºbookå¯¹è±¡,å…¥åº“</span>
        book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span>validated_data<span class="token punctuation">)</span>

        <span class="token comment">#2,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> book
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é‡‘ç“¶xxx-ç²¾è£…ç‰ˆ&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2015-11-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment">#4,å…¥åº“</span>
serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div></li></ul></li><li><p>æ³¨æ„ç‚¹:</p></li><li><p><img src="https://webplus-cn-shenzhen-s-6130b804f968dd14cecc43e2.oss-cn-shenzhen.aliyuncs.com/blogs/image-20191217154212337-16347388278283.png" alt="image-20191217154212337"></p></li></ul></li></ul><h4 id="_24-ååºåˆ—åŒ–-æ•°æ®æ›´æ–°update-æŒæ¡" tabindex="-1">24,ååºåˆ—åŒ–-æ•°æ®æ›´æ–°update(æŒæ¡) <a class="header-anchor" href="#_24-ååºåˆ—åŒ–-æ•°æ®æ›´æ–°update-æŒæ¡" aria-hidden="true">#</a></h4><blockquote><p>å½“åˆ›å»ºåºåˆ—åŒ–å™¨çš„æ—¶å€™ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨å»æ‰¾update()æ–¹æ³•</p></blockquote><ul><li><p>ç›®çš„: å¯ä»¥é‡å†™updateæ–¹æ³•, æ›´æ–°æ•°æ®åº“ä¸­æŒ‡å®šçš„ä¹¦ç±</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   
  <span class="token comment">#6,é‡å†™updateæ–¹æ³•,å®ç°æ•°æ®æ›´æ–°</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> validated_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        :param instance: éœ€è¦æ›´æ–°çš„å¯¹è±¡
        :param validated_data: éªŒè¯æˆåŠŸä¹‹åçš„æ•°æ®
        :return:
        &quot;&quot;&quot;</span>
        <span class="token comment">#1,æ›´æ–°æ•°æ®</span>
        instance<span class="token punctuation">.</span>btitle <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;btitle&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>bpub_date <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>bread <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;bread&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>bcomment <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#2,è¿”å›æ•°æ®</span>
        book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>instance<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> book
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer
<span class="token keyword">from</span> book<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é‡‘ç“¶xxx-è¿ç¯ç”»&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-11-11&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">20</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">,</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment">#4,å…¥åº“</span>
serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li><li><p>æ³¨æ„ç‚¹:</p><ul><li><img src="https://webplus-cn-shenzhen-s-6130b804f968dd14cecc43e2.oss-cn-shenzhen.aliyuncs.com/blogs/image-20191217160603632-16347388187162.png" alt="image-20191217160603632"></li></ul></li></ul></li></ul><h2 id="modelserializer" tabindex="-1">ModelSerializer <a class="header-anchor" href="#modelserializer" aria-hidden="true">#</a></h2><h4 id="_1-modelserializer" tabindex="-1">1,ModelSerializer <a class="header-anchor" href="#_1-modelserializer" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨ModelSerializeræ ¹æ®æ¨¡å‹ç±»ç”Ÿæˆå­—æ®µ</p></li><li><p><strong>ä½œç”¨:</strong></p><ul><li>1, å¯ä»¥å‚è€ƒæ¨¡å‹ç±»è‡ªåŠ¨ç”Ÿæˆå­—æ®µ, è¿˜å¯ä»¥è‡ªå·±ç¼–å†™å­—æ®µ</li><li>2, æä¾›äº†createæ–¹æ³•,updateæ–¹æ³•</li></ul></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å®šä¹‰æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers
<span class="token keyword">from</span> book<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo

<span class="token comment">#1,å®šä¹‰ä¹¦ç±æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># mobile = serializers.CharField(max_length=11,min_length=11,label=&quot;æ‰‹æœºå·&quot;,write_only=True)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> BookInfo <span class="token comment">#å‚è€ƒæ¨¡å‹ç±»ç”Ÿæˆå­—æ®µ</span>
        fields <span class="token operator">=</span> <span class="token string">&quot;__all__&quot;</span> <span class="token comment">#ç”Ÿæˆæ‰€æœ‰å­—æ®µ</span>
</code></pre></div></li></ul></li><li><p>2, æµ‹è¯•ç»“æœ</p><p>1, ä½¿ç”¨æ¨¡å‹ç±»åºåˆ—åŒ–å™¨, æµ‹è¯•åºåˆ—åŒ–</p><blockquote><p>äººä¸ºåœ¨åºåˆ—å™¨æ·»åŠ å­—æ®µï¼Œè€Œæ¨¡å‹ç±»é‡Œé¢ä¸æ·»åŠ ä¸»è¦æ˜¯æœ‰äº›æ•°æ®éœ€è¦æ ¡éªŒï¼Œä½†ä¸éœ€è¦å…¥åº“ï¼Œæ¯”å¦‚çŸ­ä¿¡éªŒè¯ç ï¼›</p><p>ç›´æ¥è¾“å‡ºå¯èƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºåºåˆ—åŒ–å™¨é‡Œé¢æœ‰äººä¸ºæ·»åŠ çš„mobileå­—æ®µï¼Œè€Œæ¨¡å‹ç±»é‡Œé¢æ²¡æœ‰ï¼Œè§£å†³æ–¹æ¡ˆæœ‰1é‡Œé¢çš„ä¸‹é¢å‡ ç§ï¼š</p></blockquote><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
1, æ¨¡å‹ç±»ä¸­æ·»åŠ mobileå­—æ®µ
2, åˆ é™¤åºåˆ—åŒ–å™¨ä¸­çš„mobile
3, åŠ¨æ€æ·»åŠ ä¸€mobileå±æ€§
4, å°†mobileå­—æ®µè®¾ç½®ä¸ºwrite_only(åªå†™,åªè¿›è¡Œååºåˆ—åŒ–)
&quot;&quot;&quot;</span>
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookModelSerializer

<span class="token comment">#1,è·å–æ¨¡å‹ç±»å¯¹è±¡</span>
book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># book.mobile = &quot;13838389438&quot;</span>

<span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
serializer <span class="token operator">=</span> BookModelSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">)</span>

<span class="token comment">#3,è¾“å‡ºç»“æœ</span>
serializer<span class="token punctuation">.</span>data
</code></pre></div><p>2, ä½¿ç”¨æ¨¡å‹ç±»åºåˆ—åŒ–å™¨, æµ‹è¯•ååºåˆ—åŒ–, å…¥åº“æ“ä½œ</p><blockquote><p>è‡ªåŠ¨å¸¦æœ‰create()æ–¹æ³•</p></blockquote><div class="language-python"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®</span>
book_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é¹¿é¼è®°1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;1999-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åºåˆ—åŒ–å™¨å¯¹è±¡åˆ›å»º</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>book_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ,å…¥åº“</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>


</code></pre></div><p>3, ä½¿ç”¨æ¨¡å‹ç±»åºåˆ—åŒ–å™¨, æµ‹è¯•ååºåˆ—åŒ–, æ›´æ–°æ“ä½œ</p><blockquote><p>è‡ªåŠ¨å¸¦æœ‰update()æ–¹æ³•</p></blockquote><div class="language-python"><pre><code><span class="token keyword">from</span> booktest<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookModelSerializer
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo

<span class="token comment">#1,å‡†å¤‡å­—å…¸æ•°æ®, ä¹¦ç±å¯¹è±¡</span>
book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span>
book_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;é¹¿é¼è®°2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;1999-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,åºåˆ—åŒ–å™¨å¯¹è±¡åˆ›å»º</span>
serializer <span class="token operator">=</span> BookModelSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">,</span>data<span class="token operator">=</span>book_dict<span class="token punctuation">)</span>

<span class="token comment">#3,æ ¡éªŒ,å…¥åº“</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul><h4 id="_2-fields" tabindex="-1">2, fields <a class="header-anchor" href="#_2-fields" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨fieldsç”ŸæˆæŒ‡å®šçš„å­—æ®µ</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, åºåˆ—åŒ–å™¨</p></li><li><div class="language-python"><pre><code><span class="token comment">#1,å®šä¹‰ä¹¦ç±æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookModelSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>

    mobile <span class="token operator">=</span> serializers<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span>min_length<span class="token operator">=</span><span class="token number">11</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;æ‰‹æœºå·&quot;</span><span class="token punctuation">,</span>write_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> BookInfo <span class="token comment">#å‚è€ƒæ¨¡å‹ç±»ç”Ÿæˆå­—æ®µ</span>
        <span class="token comment"># fields = &quot;__all__&quot; #ç”Ÿæˆæ‰€æœ‰å­—æ®µ</span>

        <span class="token comment">#1,ç”ŸæˆæŒ‡å®šçš„å­—æ®µ</span>
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;btitle&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;mobile&quot;</span><span class="token punctuation">]</span>
</code></pre></div></li><li><p>fields: ç”ŸæˆæŒ‡å®šçš„å­—æ®µ</p></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>è¿›å…¥åˆ°ModelSerializerçˆ¶ç±», 1063è¡Œæºç ä¸­å­˜åœ¨</li></ul></li></ul></li></ul><h4 id="_3-read-only-fields" tabindex="-1">3,read_only_fields <a class="header-anchor" href="#_3-read-only-fields" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„:å¯ä»¥ä½¿ç”¨read_only_fieldsè®¾ç½®åªè¯»å­—æ®µ</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1,åºåˆ—åŒ–å™¨</p></li><li><div class="language-python"><pre><code><span class="token comment">#1,å®šä¹‰ä¹¦ç±æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookModelSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        
        <span class="token comment">#2,è®¾ç½®åªè¯»å­—æ®µ</span>
        read_only_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;btitle&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">]</span>
</code></pre></div></li></ul></li></ul><h4 id="_4-extra-kwargs" tabindex="-1">4,extra_kwargs <a class="header-anchor" href="#_4-extra-kwargs" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨extra_kwargs, ç»™ç”Ÿæˆçš„å­—æ®µ,æ·»åŠ é€‰é¡¹çº¦æŸï¼Œå°±æ˜¯å®ƒè‡ªåŠ¨ç”Ÿæˆçš„çº¦æŸæ»¡è¶³ä¸äº†å®é™…éœ€æ±‚</p></li><li><p>æ“ä½œæµç¨‹:</p><blockquote><p>å¯¹åº”çš„å­—æ®µååŠ ä¸Šé€‰é¡¹åçš„å­—å…¸å°±å¯ä»¥äº†</p></blockquote><ul><li><p>1, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token comment">#1,å®šä¹‰ä¹¦ç±æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookModelSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token comment">#3,ç»™ç”Ÿæˆçš„å­—æ®µæ·»åŠ é¢å¤–çº¦æŸ</span>
        extra_kwargs <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
                <span class="token string">&quot;max_value&quot;</span><span class="token punctuation">:</span><span class="token number">999999</span><span class="token punctuation">,</span>
                <span class="token string">&quot;min_value&quot;</span><span class="token punctuation">:</span><span class="token number">0</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;max_value&quot;</span><span class="token punctuation">:</span> <span class="token number">888888</span><span class="token punctuation">,</span>
                <span class="token string">&quot;min_value&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></li></ul><h2 id="ä¸€çº§è§†å›¾apiview" tabindex="-1">ä¸€çº§è§†å›¾APIView <a class="header-anchor" href="#ä¸€çº§è§†å›¾apiview" aria-hidden="true">#</a></h2><h4 id="_5-apiviewä¹‹request" tabindex="-1">5,APIViewä¹‹request <a class="header-anchor" href="#_5-apiviewä¹‹request" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: çŸ¥é“APIViewçš„ç‰¹ç‚¹, å¹¶ä¸”å¯ä»¥é€šè¿‡requestè·å–å‚æ•°</p></li><li><p><strong>ç‰¹ç‚¹:</strong></p><ul><li><p>1, ç»§æ‰¿è‡ªView</p></li><li><p>2, æä¾›äº†è‡ªå·±çš„requestå¯¹è±¡</p><ul><li>getå‚æ•°: request.query_params</li><li>postå‚æ•°: request.data</li></ul></li><li><p>3, æä¾›äº†è‡ªå·±çš„responseå¯¹è±¡</p></li><li><p>4, å¹¶ä¸”æä¾›äº†è®¤è¯, æƒé™, é™æµç­‰åŠŸèƒ½</p><blockquote><p>è·å–æ•°æ®çš„æ–¹å¼ä¸ä¸€æ ·äº†</p></blockquote></li></ul></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#1,å®šä¹‰ç±»,é›†æˆAPIView</span>
<span class="token keyword">class</span> <span class="token class-name">BookAPIView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Viewè·å–æ•°æ®æ–¹å¼:
            GET:
                request.GET
            POST:
                request.POST
                request.body

        APIViewè·å–æ•°æ®æ–¹å¼
            GET:
                reqeust.query_params
            POST:
                request.data

        :param request:
        :return:
        &quot;&quot;&quot;</span>
        <span class="token comment">#1,è·å–APIVIewä¸­çš„getè¯·æ±‚å‚æ•°</span>
        <span class="token comment"># print(request.query_params)</span>

        <span class="token keyword">return</span> http<span class="token punctuation">.</span>HttpResponse<span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment"># 2,è·å–APIViewä¸­çš„postçš„å‚æ•°</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

        <span class="token keyword">return</span> http<span class="token punctuation">.</span>HttpResponse<span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_6-apiviewä¹‹response" tabindex="-1">6,APIViewä¹‹Response <a class="header-anchor" href="#_6-apiviewä¹‹response" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: <strong>å¯ä»¥ä½¿ç”¨responseå“åº”å„ç§æ•°æ®å’ŒçŠ¶æ€</strong></p></li><li><p>å¥½å¤„:</p><ul><li>1,ä½¿ç”¨ä¸€ä¸ªç±», å°±å¯ä»¥æ›¿ä»£ä»¥å‰Viewä¸­çš„å„ç§ç±»å‹çš„Response(HttpResponse,JsonResponseâ€¦.)</li><li>2, å¯ä»¥é…åˆçŠ¶æ€ç statusä½¿ç”¨</li></ul></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1,ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> APIView
<span class="token keyword">from</span> django <span class="token keyword">import</span> http
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> status

<span class="token comment">#1,å®šä¹‰ç±»,é›†æˆAPIView</span>
<span class="token keyword">class</span> <span class="token class-name">BookAPIView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

			<span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>	<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_404_NOT_FOUND<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_7-apiviewå®ç°åˆ—è¡¨è§†å›¾" tabindex="-1">7,APIViewå®ç°åˆ—è¡¨è§†å›¾ <a class="header-anchor" href="#_7-apiviewå®ç°åˆ—è¡¨è§†å›¾" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨åºåˆ—åŒ–å™¨å’ŒAPIViewå¯¹åˆ—è¡¨è§†å›¾è¿›è¡Œ<strong>æ”¹å†™</strong></p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># url(r&#39;^books/$&#39;,views.BookAPIView.as_view()),</span>
    url<span class="token punctuation">(</span><span class="token string">r&#39;^books/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookListAPIView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#2,åºåˆ—åŒ–å™¨å’ŒAPIViewå®ç°åˆ—è¡¨è§†å›¾</span>
<span class="token keyword">class</span> <span class="token class-name">BookListAPIView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#1,æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±</span>
        books <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#2,å°†å¯¹è±¡åˆ—è¡¨è½¬æˆå­—å…¸åˆ—è¡¨</span>
        serializr <span class="token operator">=</span> BookInfoModelSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>books<span class="token punctuation">,</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token comment">#3,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializr<span class="token punctuation">.</span>data<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#1,è·å–å‚æ•°</span>
        data_dict <span class="token operator">=</span> request<span class="token punctuation">.</span>data

        <span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨</span>
        serializer <span class="token operator">=</span> BookInfoModelSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

        <span class="token comment">#3,æ ¡éªŒ,å…¥åº“</span>
        serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#4,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span>status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_201_CREATED<span class="token punctuation">)</span>
</code></pre></div></li></ul></li><li><p>3, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo

<span class="token comment">#1,å®šä¹‰ä¹¦ç±æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> BookInfo
        fields <span class="token operator">=</span> <span class="token string">&quot;__all__&quot;</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_8-apiviewå®ç°è¯¦æƒ…è§†å›¾" tabindex="-1">8,APIViewå®ç°è¯¦æƒ…è§†å›¾ <a class="header-anchor" href="#_8-apiviewå®ç°è¯¦æƒ…è§†å›¾" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨æ¨¡å‹ç±»åºåˆ—åŒ–å™¨å’ŒAPVIewæ”¹å†™è¯¦æƒ…è§†å›¾</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  
    url<span class="token punctuation">(</span><span class="token string">r&#39;^books/(?P&lt;book_id&gt;\d+)/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookDetailAPIView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment"># 3,åºåˆ—åŒ–å™¨å’ŒAPIViewå®ç°è¯¦æƒ…è§†å›¾</span>
<span class="token keyword">class</span> <span class="token class-name">BookDetailAPIView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> book_id<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment"># 1,è·å–ä¹¦ç±</span>
        book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>book_id<span class="token punctuation">)</span>

        <span class="token comment"># 2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
        serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">)</span>

        <span class="token comment"># 4,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_200_OK<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> book_id<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment"># 1,è·å–æ•°æ®,è·å–å¯¹è±¡</span>
        data_dict <span class="token operator">=</span> request<span class="token punctuation">.</span>data
        book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>book_id<span class="token punctuation">)</span>

        <span class="token comment"># 2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
        serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">,</span> data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

        <span class="token comment"># 3,æ ¡éªŒ,å…¥åº“</span>
        serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 4,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_201_CREATED<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> book_id<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment"># 1,åˆ é™¤ä¹¦ç±</span>
        BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>book_id<span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 2,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_204_NO_CONTENT<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h2 id="äºŒçº§è§†å›¾ä¸mixin" tabindex="-1">äºŒçº§è§†å›¾ä¸Mixin <a class="header-anchor" href="#äºŒçº§è§†å›¾ä¸mixin" aria-hidden="true">#</a></h2><h4 id="_9-äºŒçº§è§†å›¾-å®ç°åˆ—è¡¨è§†å›¾" tabindex="-1">9,äºŒçº§è§†å›¾,å®ç°åˆ—è¡¨è§†å›¾ <a class="header-anchor" href="#_9-äºŒçº§è§†å›¾-å®ç°åˆ—è¡¨è§†å›¾" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥é€šè¿‡GenericAPIViewæ”¹å†™åˆ—è¡¨è§†å›¾</p><blockquote><p>ä¸»è¦å°±æ˜¯æŠŠå„ä¸ªæ–¹æ³•è°ƒç”¨çš„æ¨¡å‹ç±»æ”¾åˆ°ç±»çš„å±æ€§ä¸Šï¼Œè¿™æ ·æ¯”å¦‚æ¢æˆè‹±é›„çš„æ—¶å€™åªéœ€è¦æ”¹æ”¹ç±»å±æ€§å°±å¯ä»¥äº†ï¼Œè€Œä¸æ˜¯åˆ°æ¯ä¸ªæ–¹æ³•é‡Œé¢å•ç‹¬ä¿®æ”¹ï¼Œç›¸å¯¹äºä¹‹å‰çš„ï¼Œä»£ç è¿˜æ²¡æœ‰å‡å°‘ä½†å¤ç”¨æ€§æ›´å¥½ï¼›</p></blockquote></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1,å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>url<span class="token punctuation">(</span><span class="token string">r&#39;^generic_apiview_books/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookListGenericAPIView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#4,äºŒçº§è§†å›¾GenericAPIViewç‰¹ç‚¹</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
ç‰¹ç‚¹: 
1, GenericAPIView,ç»§æ‰¿è‡ªAPIViewç±»ï¼Œä¸ºåˆ—è¡¨è§†å›¾, å’Œè¯¦æƒ…è§†å›¾,æ·»åŠ äº†å¸¸ç”¨çš„è¡Œä¸ºå’Œå±æ€§ã€‚
    è¡Œä¸º(æ–¹æ³•)
        get_queryset
        get_serializer
    
    å±æ€§
        queryset
        serializer_class

2, å¯ä»¥å’Œä¸€ä¸ªæˆ–å¤šä¸ªmixinç±»é…åˆä½¿ç”¨ã€‚
&quot;&quot;&quot;</span>

<span class="token comment">#5,ä½¿ç”¨äºŒçº§è§†å›¾GenericAPIViewå®ç°, åˆ—è¡¨è§†å›¾</span>
<span class="token keyword">class</span> <span class="token class-name">BookListGenericAPIView</span><span class="token punctuation">(</span>GenericAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,æä¾›å…¬å…±çš„å±æ€§</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer


    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#1,æŸ¥è¯¢æ‰€æœ‰çš„ä¹¦ç±</span>
        <span class="token comment"># books = self.queryset</span>
        books <span class="token operator">=</span> self<span class="token punctuation">.</span>get_queryset<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#2,å°†å¯¹è±¡åˆ—è¡¨è½¬æˆå­—å…¸åˆ—è¡¨</span>
        <span class="token comment"># serializr = BookInfoModelSerializer(instance=books,many=True)</span>
        <span class="token comment"># serializr = self.serializer_class(instance=books,many=True)</span>
        <span class="token comment"># serializr = self.get_serializer_class()(instance=books,many=True)</span>
        serializr <span class="token operator">=</span> self<span class="token punctuation">.</span>get_serializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>books<span class="token punctuation">,</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token comment">#3,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializr<span class="token punctuation">.</span>data<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#1,è·å–å‚æ•°</span>
        data_dict <span class="token operator">=</span> request<span class="token punctuation">.</span>data

        <span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨</span>
        <span class="token comment"># serializer = BookInfoModelSerializer(data=data_dict)</span>
        serializer <span class="token operator">=</span> self<span class="token punctuation">.</span>get_serializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

        <span class="token comment">#3,æ ¡éªŒ,å…¥åº“</span>
        serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#4,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span>status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_201_CREATED<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_10-äºŒçº§è§†å›¾-å®ç°è¯¦æƒ…è§†å›¾" tabindex="-1">10,äºŒçº§è§†å›¾,å®ç°è¯¦æƒ…è§†å›¾ <a class="header-anchor" href="#_10-äºŒçº§è§†å›¾-å®ç°è¯¦æƒ…è§†å›¾" aria-hidden="true">#</a></h4><blockquote><p>è¿™é‡Œç”¨åˆ°äº†get_object()æ–¹æ³•ï¼Œä¸‹é¢ä¼šè®²ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºæºç å·²ç»å†™æ­»äº†ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å›ºå®šæŠŠä¼ è¿›æ¥çš„å‚æ•°å†™æˆpkï¼›</p></blockquote><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨GenericAPIViewæ”¹å†™è¯¦æƒ…è§†å›¾</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>url<span class="token punctuation">(</span><span class="token string">r&#39;^generic_apiview_books/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookDetailGenericAPIView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#6,ä½¿ç”¨äºŒçº§è§†å›¾GenericAPIViewå®ç°, è¯¦æƒ…è§†å›¾</span>
<span class="token keyword">class</span> <span class="token class-name">BookDetailGenericAPIView</span><span class="token punctuation">(</span>GenericAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,æä¾›é€šç”¨å±æ€§</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>pk<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment">#1,è·å–ä¹¦ç±</span>
        <span class="token comment"># book = BookInfo.objects.get(id=book_id)</span>
        book <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#æ ¹æ®book_idåˆ°querysetä¸­å–å‡ºä¹¦ç±å¯¹è±¡</span>

        <span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
        serializer <span class="token operator">=</span> self<span class="token punctuation">.</span>get_serializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">)</span>

        <span class="token comment">#4,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span>status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_200_OK<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>pk<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment">#1,è·å–æ•°æ®,è·å–å¯¹è±¡</span>
        data_dict <span class="token operator">=</span> request<span class="token punctuation">.</span>data
        book <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
        serializer <span class="token operator">=</span> self<span class="token punctuation">.</span>get_serializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">,</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

        <span class="token comment">#3,æ ¡éªŒ,å…¥åº“</span>
        serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#4,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span>status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_201_CREATED<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>pk<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment">#1,åˆ é™¤ä¹¦ç±</span>
        self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#2,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_204_NO_CONTENT<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_11-get-objectæ–¹æ³•" tabindex="-1">11,get_objectæ–¹æ³• <a class="header-anchor" href="#_11-get-objectæ–¹æ³•" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: ç†è§£get_objectå¦‚ä½•æ ¹æ®pkåœ¨querysetè·å–çš„å•ä¸ªå¯¹è±¡</p></li><li><p>äºŒçº§è§†å›¾GenericAPIViewå±æ€§æ–¹æ³•æ€»ç»“</p><ul><li><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
ç‰¹ç‚¹: 
1, GenericAPIView,ç»§æ‰¿è‡ªAPIViewç±»ï¼Œä¸ºåˆ—è¡¨è§†å›¾, å’Œè¯¦æƒ…è§†å›¾,æ·»åŠ äº†å¸¸ç”¨çš„è¡Œä¸ºå’Œå±æ€§ã€‚
    è¡Œä¸º(æ–¹æ³•)
        get_queryset:  è·å–querysetçš„æ•°æ®é›†
        get_serializer: è·å–serializer_classåºåˆ—åŒ–å™¨å¯¹è±¡
        get_object:    æ ¹æ®lookup_fieldè·å–å•ä¸ªå¯¹è±¡
    
    å±æ€§
        queryset:   é€šç”¨çš„æ•°æ®é›†
        serializer_class: é€šç”¨çš„åºåˆ—åŒ–å™¨
        lookup_field:   é»˜è®¤æ˜¯pk,å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹id

2, å¯ä»¥å’Œä¸€ä¸ªæˆ–å¤šä¸ªmixinç±»é…åˆä½¿ç”¨ã€‚
&quot;&quot;&quot;</span>
</code></pre></div></li></ul></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookDetailGenericAPIView</span><span class="token punctuation">(</span>GenericAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,æä¾›é€šç”¨å±æ€§</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    lookup_field <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span>

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment">#1,è·å–ä¹¦ç±</span>
        book <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#æ ¹æ®idåˆ°querysetä¸­å–å‡ºä¹¦ç±å¯¹è±¡</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment">#1,è·å–æ•°æ®,è·å–å¯¹è±¡</span>
				<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        book <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment">#1,åˆ é™¤ä¹¦ç±</span>
        self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre></div></li></ul></li></ul></li></ul><h4 id="_12-mixin" tabindex="-1">12,MiXin <a class="header-anchor" href="#_12-mixin" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: çŸ¥é“mixinçš„ä½œç”¨, å¸¸è§çš„mixinç±»</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
Mixin,ç‰¹ç‚¹: 
1, mixinç±»æä¾›ç”¨äºæä¾›åŸºæœ¬è§†å›¾è¡Œä¸º(åˆ—è¡¨è§†å›¾, è¯¦æƒ…è§†å›¾)çš„æ“ä½œ--å¢åˆ æ”¹æŸ¥
2, é…åˆäºŒçº§è§†å›¾GenericAPIViewä½¿ç”¨çš„

ç±»åç§°                 æä¾›æ–¹æ³•        åŠŸèƒ½
ListModelMixin        list          æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®
CreateModelMixin      create        åˆ›å»ºå•ä¸ªå¯¹è±¡
RetrieveModelMixin    retrieve      è·å–å•ä¸ªå¯¹è±¡
UpdateModelMixin      update        æ›´æ–°å•ä¸ªå¯¹è±¡
DestroyModelMixin     destroy       åˆ é™¤å•ä¸ªå¯¹è±¡

&quot;&quot;&quot;</span>
</code></pre></div></li></ul></li></ul><h4 id="_13-äºŒçº§è§†å›¾-mixiné…åˆä½¿ç”¨" tabindex="-1">13,äºŒçº§è§†å›¾,MiXiné…åˆä½¿ç”¨ <a class="header-anchor" href="#_13-äºŒçº§è§†å›¾-mixiné…åˆä½¿ç”¨" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨mixinå’ŒäºŒçº§è§†å›¾GenericAPIViewå¯¹åˆ—è¡¨è§†å›¾å’Œè¯¦æƒ…è§†å›¾åšæ”¹å†™</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>    url<span class="token punctuation">(</span><span class="token string">r&#39;^mixin_generic_apiview_books/$&#39;</span><span class="token punctuation">,</span>
        views<span class="token punctuation">.</span>BookListMixinGenericAPIView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  
    url<span class="token punctuation">(</span><span class="token string">r&#39;^mixin_generic_apiview_books/(?P&lt;book_id&gt;\d+)/$&#39;</span><span class="token punctuation">,</span>
        views<span class="token punctuation">.</span>BookDetailMixinGenericAPIView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div></li><li></li></ul></li><li><p>2,ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>mixins <span class="token keyword">import</span> ListModelMixin<span class="token punctuation">,</span>CreateModelMixin<span class="token punctuation">,</span>RetrieveModelMixin<span class="token punctuation">,</span>UpdateModelMixin<span class="token punctuation">,</span>DestroyModelMixin
<span class="token comment">#8,mixinå’ŒäºŒçº§è§†å›¾GenericAPIView, å®ç°åˆ—è¡¨è§†å›¾, è¯¦æƒ…è§†å›¾</span>
<span class="token keyword">class</span> <span class="token class-name">BookListMixinGenericAPIView</span><span class="token punctuation">(</span>GenericAPIView<span class="token punctuation">,</span>ListModelMixin<span class="token punctuation">,</span>CreateModelMixin<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,æä¾›å…¬å…±çš„å±æ€§</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>


    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>create<span class="token punctuation">(</span>request<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">BookDetailMixinGenericAPIView</span><span class="token punctuation">(</span>GenericAPIView<span class="token punctuation">,</span>RetrieveModelMixin<span class="token punctuation">,</span>UpdateModelMixin<span class="token punctuation">,</span>DestroyModelMixin<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,æä¾›é€šç”¨å±æ€§</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer
    <span class="token comment"># lookup_field = &quot;id&quot;</span>
    lookup_url_kwarg <span class="token operator">=</span> <span class="token string">&quot;book_id&quot;</span>

    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>book_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>retrieve<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">put</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>book_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>update<span class="token punctuation">(</span>request<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">delete</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>book_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>destroy<span class="token punctuation">(</span>request<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h2 id="ä¸‰çº§è§†å›¾ä¸è§†å›¾é›†" tabindex="-1">ä¸‰çº§è§†å›¾ä¸è§†å›¾é›† <a class="header-anchor" href="#ä¸‰çº§è§†å›¾ä¸è§†å›¾é›†" aria-hidden="true">#</a></h2><h4 id="_14-ä¸‰çº§è§†å›¾" tabindex="-1">14,ä¸‰çº§è§†å›¾ <a class="header-anchor" href="#_14-ä¸‰çº§è§†å›¾" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: çŸ¥é“ä¸‰çº§è§†å›¾çš„ä½œç”¨, ä»¥åŠå¸¸è§çš„ä¸‰çº§è§†å›¾</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
ç‰¹ç‚¹:
å¦‚æœæ²¡æœ‰å¤§é‡è‡ªå®šä¹‰çš„è¡Œä¸º, å¯ä»¥ä½¿ç”¨é€šç”¨è§†å›¾(ä¸‰çº§è§†å›¾)è§£å†³

å¸¸è§çš„ä¸‰çº§è§†å›¾:
ç±»åç§°                 çˆ¶ç±»              æä¾›æ–¹æ³•        ä½œç”¨
CreateAPIView       GenericAPIViewï¼Œ   post           åˆ›å»ºå•ä¸ªå¯¹è±¡
                    CreateModelMixin
                    
ListAPIView         GenericAPIView,    get            æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®
                    ListModelMixin

RetrieveAPIView     GenericAPIView,    get            è·å–å•ä¸ªå¯¹è±¡
                    RetrieveModelMixin 
                    
DestroyAPIView      GenericAPIView,    delete         åˆ é™¤å•ä¸ªå¯¹è±¡
                    DestroyModelMixin
                    
UpdateAPIView       GenericAPIView,    put            æ›´æ–°å•ä¸ªå¯¹è±¡
                    UpdateModelMixin             


&quot;&quot;&quot;</span>
</code></pre></div></li></ul></li></ul><h4 id="_15-ä¸‰çº§è§†å›¾-å®ç°åˆ—è¡¨-è¯¦æƒ…è§†å›¾" tabindex="-1">15,ä¸‰çº§è§†å›¾,å®ç°åˆ—è¡¨,è¯¦æƒ…è§†å›¾ <a class="header-anchor" href="#_15-ä¸‰çº§è§†å›¾-å®ç°åˆ—è¡¨-è¯¦æƒ…è§†å›¾" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨ä¸‰çº§è§†å›¾å®ç°åˆ—è¡¨è§†å›¾,è¯¦æƒ…è§†å›¾åŠŸèƒ½</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1,å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>    url<span class="token punctuation">(</span><span class="token string">r&#39;^third_view/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookListThirdView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r&#39;^third_view/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span>
        views<span class="token punctuation">.</span>BookDetailThirdView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div></li></ul></li><li><p>2,ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#10,ä¸‰çº§è§†å›¾,å®ç°åˆ—è¡¨,è¯¦æƒ…è§†å›¾</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>generics <span class="token keyword">import</span> ListAPIView<span class="token punctuation">,</span>CreateAPIView
<span class="token keyword">class</span> <span class="token class-name">BookListThirdView</span><span class="token punctuation">(</span>ListAPIView<span class="token punctuation">,</span>CreateAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,æä¾›å…¬å…±çš„å±æ€§</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer

<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>generics <span class="token keyword">import</span> RetrieveAPIView<span class="token punctuation">,</span>UpdateAPIView<span class="token punctuation">,</span>DestroyAPIView
<span class="token keyword">class</span> <span class="token class-name">BookDetailThirdView</span><span class="token punctuation">(</span>RetrieveAPIView<span class="token punctuation">,</span>UpdateAPIView<span class="token punctuation">,</span>DestroyAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,æä¾›é€šç”¨å±æ€§</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_16-è§†å›¾é›†" tabindex="-1">16,è§†å›¾é›† <a class="header-anchor" href="#_16-è§†å›¾é›†" aria-hidden="true">#</a></h4><blockquote><p>å°±æ˜¯æ¯”å¦‚ä½ è·å–å•ä¸ªï¼Œä»¥åŠè·å–æ‰€æœ‰ä½¿ç”¨çš„éƒ½æ˜¯get()æ–¹æ³•ï¼Œè¿™æ—¶å€™å°±ä¸èƒ½æŠŠè¿™ä¸¤ä¸ªæ–¹æ³•å†™åœ¨ä¸€ä¸ªç±»ä¹‹ä¸­ï¼Œæ‰€ä»¥è¿™å°±æ˜¯viewsetéœ€è¦è§£å†³çš„é—®é¢˜ï¼›</p></blockquote><ul><li><p>ç›®çš„: çŸ¥é“è§†å›¾é›†çš„ä½œç”¨, ä»¥åŠå¸¸è§çš„è§†å›¾é›†</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><div class="language-python"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot;
è§†å›¾é›†
ç‰¹ç‚¹:
    1,å¯ä»¥å°†ä¸€ç»„ç›¸å…³çš„æ“ä½œ, æ”¾åœ¨ä¸€ä¸ªç±»ä¸­è¿›è¡Œå®Œæˆ
    2,ä¸æä¾›get,postæ–¹æ³•, ä½¿ç”¨retrieve, createæ–¹æ³•æ¥æ›¿ä»£
    3,å¯ä»¥å°†æ ‡å‡†çš„è¯·æ±‚æ–¹å¼(get,post,put,delete), å’Œmixinä¸­çš„æ–¹æ³•åšæ˜ å°„
    
å¸¸è§çš„è§†å›¾é›†:
ç±»åç§°                 çˆ¶ç±»              ä½œç”¨
ViewSet               APIView          å¯ä»¥åšè·¯ç”±æ˜ å°„ï¼ˆæ²¡æœ‰å…¶ä»–ä»€ä¹ˆç”¨ï¼‰
                      ViewSetMixinï¼ˆæä¾›è·¯ç”±æ˜ å°„ï¼‰		
                      
GenericViewSet        GenericAPIView   å¯ä»¥åšè·¯ç”±æ˜ å°„,å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªå±æ€§,ä¸‰ä¸ªæ–¹æ³•
                      ViewSetMixin
                             
ModelViewSet          GenericAPIView   æ‰€æœ‰çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½,å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªå±æ€§,ä¸‰ä¸ªæ–¹æ³•
                      5ä¸ªmixinç±»

ReadOnlyModelViewSet  GenericAPIView   è·å–å•ä¸ª,æ‰€æœ‰æ•°æ®,å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªå±æ€§,ä¸‰ä¸ªæ–¹æ³•
                      RetrieveModelMixin
                      ListModelMixin

&quot;&quot;&quot;</span>
</code></pre></div></li></ul></li></ul><h4 id="_17-viewset" tabindex="-1">17,ViewSet <a class="header-anchor" href="#_17-viewset" aria-hidden="true">#</a></h4><blockquote><p>éœ€è¦æ³¨æ„è¿™é‡Œè·¯ç”±çš„æ˜ å°„ï¼›</p></blockquote><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨ViewSetå®ç°è·å–æ‰€æœ‰,å•ä¸ªæ•°æ®</p><blockquote><p>å¦‚æœä¸ç”¨viewsetï¼Œä¸€ä¸ªè§†å›¾ç±»é‡Œé¢æ˜¯æ— æ³•ä½¿ç”¨ä¸¤ä¸ªgetæ–¹æ³•çš„</p></blockquote></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1,å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>    url<span class="token punctuation">(</span><span class="token string">r&#39;^viewset/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BooksViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;list&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r&#39;^viewset/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BooksViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;retrieve&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li><li><p>2,ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#12, ä½¿ç”¨viewsetå®ç°è·å–æ‰€æœ‰å’Œå•ä¸ª</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> get_object_or_404
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoModelSerializer
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> viewsets

<span class="token keyword">class</span> <span class="token class-name">BooksViewSet</span><span class="token punctuation">(</span>viewsets<span class="token punctuation">.</span>ViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A simple ViewSet for listing or retrieving books.
    &quot;&quot;&quot;</span>
    <span class="token keyword">def</span> <span class="token function">list</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        serializer <span class="token operator">=</span> BookInfoModelSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>queryset<span class="token punctuation">,</span> many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">retrieve</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> pk<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        book <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>queryset<span class="token punctuation">,</span> pk<span class="token operator">=</span>pk<span class="token punctuation">)</span>
        serializer <span class="token operator">=</span> BookInfoModelSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_18-readonlymodelviewset" tabindex="-1">18,ReadOnlyModelViewSet <a class="header-anchor" href="#_18-readonlymodelviewset" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ä½¿ç”¨ReadOnlyModelViewSetè·å–æ‰€æœ‰, å’Œå•ä¸ªæ•°æ®</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>    url<span class="token punctuation">(</span><span class="token string">r&#39;^readonly_viewset/$&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>BooksReadOnlyModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;list&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  
    url<span class="token punctuation">(</span><span class="token string">r&#39;^readonly_viewset/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>BooksReadOnlyModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;retrieve&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#13,ä½¿ç”¨ReadOnlyModelViewSetå®ç°è·å–å•ä¸ªå’Œæ‰€æœ‰</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>viewsets <span class="token keyword">import</span> ReadOnlyModelViewSet
<span class="token keyword">class</span> <span class="token class-name">BooksReadOnlyModelViewSet</span><span class="token punctuation">(</span>ReadOnlyModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_19-modelviewset" tabindex="-1">19,ModelViewSet <a class="header-anchor" href="#_19-modelviewset" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: ä½¿ç”¨ModelViewSetå®ç°åˆ—è¡¨è§†å›¾,è¯¦æƒ…è§†å›¾åŠŸèƒ½</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>    url<span class="token punctuation">(</span><span class="token string">r&#39;^model_viewset/$&#39;</span><span class="token punctuation">,</span> 
        views<span class="token punctuation">.</span>BookModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;list&#39;</span><span class="token punctuation">,</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;create&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  
    url<span class="token punctuation">(</span><span class="token string">r&#39;^model_viewset/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span> 
        views<span class="token punctuation">.</span>BookModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;retrieve&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;put&#39;</span><span class="token punctuation">:</span><span class="token string">&#39;update&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;delete&#39;</span><span class="token punctuation">:</span><span class="token string">&#39;destroy&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#14,ModelViewSetå®ç°åˆ—è¡¨è§†å›¾,è¯¦æƒ…è§†å›¾åŠŸèƒ½</span>
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>viewsets <span class="token keyword">import</span> ModelViewSet
<span class="token keyword">class</span> <span class="token class-name">BookModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer
</code></pre></div></li></ul></li></ul></li></ul><h2 id="è§†å›¾é›†é¢å¤–åŠ¨ä½œ" tabindex="-1">è§†å›¾é›†é¢å¤–åŠ¨ä½œ <a class="header-anchor" href="#è§†å›¾é›†é¢å¤–åŠ¨ä½œ" aria-hidden="true">#</a></h2><h4 id="_1-è§†å›¾é›†é¢å¤–åŠ¨ä½œ" tabindex="-1">1,è§†å›¾é›†é¢å¤–åŠ¨ä½œ <a class="header-anchor" href="#_1-è§†å›¾é›†é¢å¤–åŠ¨ä½œ" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ç»™è§†å›¾é›†æ·»åŠ é¢å¤–çš„åŠ¨ä½œ(æ–¹æ³•)</p><blockquote><p>ä¸ä¿®æ”¹åŸæœ‰çš„æ–¹æ³•ï¼Œä½†éœ€è¦è‡ªå®šä¹‰è‡ªå·±çš„æ–¹æ³•ï¼šæ¯”å¦‚æŸ¥å‡ºé˜…è¯»é‡å¤§äº20çš„ä¹¦ç±</p><p>åŸç†ï¼šå°±æ˜¯æŠŠè‡ªå·±è‡ªå®šä¹‰çš„æ–¹æ³•ä¸getæˆ–å…¶ä»–åšä¸€ä¸ªæ˜ å°„å°±å¯ä»¥äº†</p></blockquote></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r&#39;^books/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookInfoModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;create&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r&#39;^books/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookInfoModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;retrieve&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;put&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;update&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;destory&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    url<span class="token punctuation">(</span><span class="token string">r&#39;^books/bread/$&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookInfoModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;bread_book&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>viewsets <span class="token keyword">import</span> ModelViewSet
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> BookInfoModelSerializer
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response

<span class="token comment">#1,è§†å›¾é›†</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer

    <span class="token comment">#1,è·å–é˜…è¯»é‡å¤§äº20çš„ä¹¦ç±</span>
    <span class="token keyword">def</span> <span class="token function">bread_book</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#1,è·å–æŒ‡å®šä¹¦ç±</span>
        books <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>bread__gt<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>

        <span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡</span>
        serializer <span class="token operator">=</span> self<span class="token punctuation">.</span>get_serializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>books<span class="token punctuation">,</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token comment">#3,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

    <span class="token comment">#2,ä¿®æ”¹ä¹¦ç±ç¼–å·ä¸º1çš„, é˜…è¯»é‡ä¸º99</span>

</code></pre></div></li></ul></li><li><p>3, åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers
<span class="token keyword">from</span> booktest<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo

<span class="token comment">#1,æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> BookInfo
        fields <span class="token operator">=</span> <span class="token string">&quot;__all__&quot;</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_2-è§†å›¾é›†é¢å¤–åŠ¨ä½œ-partial" tabindex="-1">2,è§†å›¾é›†é¢å¤–åŠ¨ä½œ,partial <a class="header-anchor" href="#_2-è§†å›¾é›†é¢å¤–åŠ¨ä½œ-partial" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥ç¼–å†™é¢å¤–åŠ¨ä½œæ·»åŠ å‚æ•°, å¹¶ä¸”æ›´æ–°å±€éƒ¨ä¿¡æ¯</p><blockquote><p>æ¯”å¦‚åªä¼ bread:99å»ä¿®æ”¹å°±ä¼šæŠ¥é”™ï¼ŒåŠ ä¸Šè¿™ä¸ªå­—æ®µå°±ä¸ä¼šæŠ¥é”™</p></blockquote></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code>    url<span class="token punctuation">(</span><span class="token string">r&#39;^books/bread/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="token punctuation">,</span>
     views<span class="token punctuation">.</span>BookInfoModelViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;put&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;update_book_bread&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

</code></pre></div></li></ul></li><li><p>2, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#2,ä¿®æ”¹ä¹¦ç±ç¼–å·ä¸º1çš„, é˜…è¯»é‡ä¸º99</span>
    <span class="token keyword">def</span> <span class="token function">update_book_bread</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#1,è·å–å‚æ•°</span>
        book <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>
        data <span class="token operator">=</span> request<span class="token punctuation">.</span>data

        <span class="token comment">#2,åˆ›å»ºåºåˆ—åŒ–å™¨,partial=Trueå¯ä»¥å±€éƒ¨æ›´æ–°</span>
        serializer <span class="token operator">=</span> self<span class="token punctuation">.</span>get_serializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">,</span>partial<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token comment">#3,æ ¡éªŒ,å…¥åº“</span>
        serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#4,è¿”å›å“åº”</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">,</span>status<span class="token operator">=</span><span class="token number">201</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h2 id="router" tabindex="-1">router <a class="header-anchor" href="#router" aria-hidden="true">#</a></h2><h4 id="_3-è·¯ç”±router" tabindex="-1">3,è·¯ç”±router <a class="header-anchor" href="#_3-è·¯ç”±router" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥é€šè¿‡DefaultRouterå’ŒSimpleRouterä¸¤ä¸ªç±»æ¥è‡ªåŠ¨ç”Ÿæˆè·¯ç”±</p></li><li><p>DefautRouterç”Ÿæˆè·¯ç”±æ ¼å¼:</p><ul><li><p>ç‰¹ç‚¹: å…±æœ‰ä¸‰å¯¹è·¯ç”±</p><ul><li>1, åˆ—è¡¨è·¯ç”±</li><li>2, è¯¦æƒ…è·¯ç”±</li><li>3, æ ¹è·¯ç”±</li></ul></li><li><div class="language-python"><pre><code><span class="token punctuation">[</span>

<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span><span class="token builtin">list</span> <span class="token operator">^</span>books<span class="token operator">/</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span><span class="token builtin">list</span> <span class="token operator">^</span>books\<span class="token punctuation">.</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>?$<span class="token operator">&gt;</span><span class="token punctuation">,</span>

<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span>detail <span class="token operator">^</span>books<span class="token operator">/</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span>pk<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span>detail <span class="token operator">^</span>books<span class="token operator">/</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span>pk<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>?$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 

<span class="token operator">&lt;</span>RegexURLPattern api<span class="token operator">-</span>root <span class="token operator">^</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern api<span class="token operator">-</span>root <span class="token operator">^</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>?$<span class="token operator">&gt;</span>

<span class="token punctuation">]</span>

</code></pre></div></li><li><p>SimpleRouterç”Ÿæˆè·¯ç”±æ ¼å¼:</p><ul><li><p>ç‰¹ç‚¹: ç”Ÿæˆä¸¤ä¸ªè·¯ç”±</p><ul><li>1, åˆ—è¡¨è·¯ç”±</li><li>2, è¯¦æƒ…è·¯ç”±</li></ul></li><li><div class="language-python"><pre><code><span class="token punctuation">[</span>
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span><span class="token builtin">list</span> <span class="token operator">^</span>books<span class="token operator">/</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span>detail <span class="token operator">^</span>books<span class="token operator">/</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span>pk<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>$<span class="token operator">&gt;</span>
<span class="token punctuation">]</span>
</code></pre></div></li></ul></li></ul></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å­è·¯ç”±</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>routers <span class="token keyword">import</span> SimpleRouter<span class="token punctuation">,</span>DefaultRouter
<span class="token comment">#1,åˆ›å»ºè·¯ç”±å¯¹è±¡</span>
router <span class="token operator">=</span> SimpleRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#2,æ³¨å†Œè§†å›¾é›†</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">&#39;books&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookInfoModelViewSet<span class="token punctuation">,</span>base_name<span class="token operator">=</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span>
urlpatterns <span class="token operator">+=</span> router<span class="token punctuation">.</span>urls

<span class="token comment">#3,è¾“å‡ºç»“æœ</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urlpatterns<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>1, ä½¿ç”¨DRFå¯ä»¥è‡ªåŠ¨æ ¹æ®å‰ç«¯éœ€è¦çš„ç±»å‹, è¿”å›å¯¹åº”æ ¼å¼çš„æ•°æ®</li><li>2, è¯·æ±‚çš„æ—¶å€™åœ¨è¯·æ±‚å¤´ä¸­æ ‡è®°, Acceptå³å¯</li><li>3, åªæœ‰è§†å›¾é›†,æ‰èƒ½è‡ªåŠ¨ç”Ÿæˆè·¯ç”±</li></ul></li></ul><h4 id="_4-è£…é¥°action" tabindex="-1">4,è£…é¥°action <a class="header-anchor" href="#_4-è£…é¥°action" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥é€šè¿‡actionè£…é¥°æ–¹æ³•, è‡ªåŠ¨ç”Ÿæˆè·¯ç”±</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, ç±»è§†å›¾</p></li><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> action

<span class="token comment">#1,è§†å›¾é›†</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#1,è·å–é˜…è¯»é‡å¤§äº20çš„ä¹¦ç±</span>
    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>detail<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment">#ç”Ÿæˆè·¯ç”±è§„åˆ™: å‰ç¼€/æ–¹æ³•å/</span>
    <span class="token keyword">def</span> <span class="token function">bread_book</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#2,ä¿®æ”¹ä¹¦ç±ç¼–å·ä¸º1çš„, é˜…è¯»é‡ä¸º99</span>
    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;PUT&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment">#ç”Ÿæˆè·¯ç”±è§„åˆ™: å‰ç¼€/{pk}/æ–¹æ³•å/</span>
    <span class="token keyword">def</span> <span class="token function">update_book_bread</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre></div></li></ul></li></ul><h2 id="æƒé™è®¾ç½®" tabindex="-1">æƒé™è®¾ç½® <a class="header-anchor" href="#æƒé™è®¾ç½®" aria-hidden="true">#</a></h2><h4 id="_5-è®¤è¯authentication" tabindex="-1">5,è®¤è¯Authentication <a class="header-anchor" href="#_5-è®¤è¯authentication" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£, é…ç½®è®¤è¯å†…å®¹</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å…¨å±€é…ç½®(<a href="http://setteings.py" target="_blank" rel="noopener noreferrer">setteings.py</a>)</p><ul><li><div class="language-python"><pre><code><span class="token comment"># DRFé…ç½®ä¿¡æ¯</span>
REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">#1,å…¨å±€è®¤è¯</span>
    <span class="token string">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;rest_framework.authentication.BasicAuthentication&#39;</span><span class="token punctuation">,</span> <span class="token comment">#æ­¤èº«ä»½éªŒè¯æ–¹æ¡ˆä½¿ç”¨HTTPåŸºæœ¬èº«ä»½éªŒè¯,ç”¨äºæµ‹è¯•ä½¿ç”¨</span>
        <span class="token string">&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class="token punctuation">,</span> <span class="token comment">#è‡ªå·±æœåŠ¡å™¨è®¤è¯ç”¨æˆ·</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li><li><p>2, å±€éƒ¨é…ç½®(<a href="http://views.py" target="_blank" rel="noopener noreferrer">views.py</a>)</p><ul><li><div class="language-python"><pre><code><span class="token comment">#1,è§†å›¾é›†</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#1,å±€éƒ¨è®¤è¯</span>
    authentication_classes <span class="token operator">=</span> <span class="token punctuation">[</span>SessionAuthentication<span class="token punctuation">]</span>
</code></pre></div></li></ul></li></ul></li><li><p>æ³¨æ„ç‚¹:</p><ul><li>å¦‚æœé…ç½®äº†å…¨å±€å’Œå±€éƒ¨, é»˜è®¤ä½¿ç”¨å±€éƒ¨</li></ul></li></ul><h4 id="_6-æƒé™permissions" tabindex="-1">6,æƒé™Permissions <a class="header-anchor" href="#_6-æƒé™permissions" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£, é…ç½®æƒé™å†…å®¹</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å…¨å±€æƒé™é…ç½®(<a href="http://settings.py" target="_blank" rel="noopener noreferrer">settings.py</a>)</p><ul><li><div class="language-python"><pre><code>REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">#1,å…¨å±€è®¤è¯</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#2,å…¨å±€æƒé™</span>
    <span class="token string">&#39;DEFAULT_PERMISSION_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token comment"># &#39;rest_framework.permissions.IsAuthenticated&#39;, #æ™®é€šç”¨æˆ·</span>
        <span class="token comment"># &#39;rest_framework.permissions.AllowAny&#39;, #æ‰€æœ‰ç”¨æˆ·</span>
        <span class="token string">&#39;rest_framework.permissions.IsAdminUser&#39;</span><span class="token punctuation">,</span> <span class="token comment">#ç®¡ç†å‘˜æˆ·</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li><li><p>2, å±€éƒ¨æƒé™é…ç½®(<a href="http://views.py" target="_blank" rel="noopener noreferrer">views.py</a>)</p><ul><li><div class="language-python"><pre><code><span class="token comment">#1,è§†å›¾é›†</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#1,å±€éƒ¨è®¤è¯</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#2,å±€éƒ¨æƒé™</span>
    <span class="token comment"># permission_classes = [AllowAny]</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_7-é™æµthrottling" tabindex="-1">7,é™æµThrottling <a class="header-anchor" href="#_7-é™æµthrottling" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥é€šè¿‡é…ç½®, é™åˆ¶ä¸åŒç”¨æˆ·çš„è®¿é—®æ¬¡æ•°</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å…¨å±€é…ç½®</p><ul><li><div class="language-python"><pre><code><span class="token comment"># DRFé…ç½®ä¿¡æ¯</span>
REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">#1,å…¨å±€è®¤è¯</span>
    <span class="token string">&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;rest_framework.authentication.BasicAuthentication&#39;</span><span class="token punctuation">,</span> <span class="token comment">#æ­¤èº«ä»½éªŒè¯æ–¹æ¡ˆä½¿ç”¨HTTPåŸºæœ¬èº«ä»½éªŒè¯,ç”¨äºæµ‹è¯•ä½¿ç”¨</span>
        <span class="token string">&#39;rest_framework.authentication.SessionAuthentication&#39;</span><span class="token punctuation">,</span> <span class="token comment">#è‡ªå·±æœåŠ¡å™¨è®¤è¯ç”¨æˆ·</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">#2,å…¨å±€æƒé™</span>
    <span class="token comment"># &#39;DEFAULT_PERMISSION_CLASSES&#39;: [</span>
    <span class="token comment">#     # &#39;rest_framework.permissions.IsAuthenticated&#39;, #æ™®é€šç”¨æˆ·</span>
    <span class="token comment">#     # &#39;rest_framework.permissions.AllowAny&#39;, #æ‰€æœ‰ç”¨æˆ·</span>
    <span class="token comment">#     &#39;rest_framework.permissions.IsAdminUser&#39;, #ç®¡ç†å‘˜æˆ·</span>
    <span class="token comment"># ],</span>

    <span class="token comment">#3,å…¨å±€é™æµ</span>
    <span class="token string">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;rest_framework.throttling.AnonRateThrottle&#39;</span><span class="token punctuation">,</span> <span class="token comment">#åŒ¿åç”¨æˆ·</span>
        <span class="token string">&#39;rest_framework.throttling.UserRateThrottle&#39;</span> <span class="token comment"># è®¤è¯ç”¨æˆ·</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&#39;anon&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;2/minute&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;user&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;3/minute&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li><li><p>2, å±€éƒ¨é…ç½®</p><ul><li><div class="language-python"><pre><code><span class="token comment">#1,è§†å›¾é›†</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    queryset <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> BookInfoModelSerializer

    <span class="token comment">#1,å±€éƒ¨è®¤è¯</span>
    <span class="token comment"># authentication_classes = [SessionAuthentication]</span>

    <span class="token comment">#2,å±€éƒ¨æƒé™</span>
    <span class="token comment"># permission_classes = [AllowAny]</span>

    <span class="token comment">#3,å±€éƒ¨é™æµ</span>
    throttle_classes <span class="token operator">=</span> <span class="token punctuation">[</span>AnonRateThrottle<span class="token punctuation">]</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_8-å¯é€‰é™æµ" tabindex="-1">8, å¯é€‰é™æµ <a class="header-anchor" href="#_8-å¯é€‰é™æµ" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å®šä¹‰å¯é€‰é™æµ, ç”¨åœ¨ä¸åŒçš„ç±»è§†å›¾ä¸­</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å…¨å±€å®šä¹‰</p><ul><li><div class="language-python"><pre><code><span class="token comment"># DRFé…ç½®ä¿¡æ¯</span>
REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">#4,å¯é€‰é™æµ</span>
    <span class="token string">&#39;DEFAULT_THROTTLE_CLASSES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;rest_framework.throttling.ScopedRateThrottle&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&#39;DEFAULT_THROTTLE_RATES&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&#39;downloads&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;3/minute&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;uploads&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;5/minute&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li><li><p>2, å±€éƒ¨ä½¿ç”¨</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">TestView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    throttle_scope <span class="token operator">=</span> <span class="token string">&quot;uploads&quot;</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token string">&quot;testing....&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h2 id="urlå¯é€‰å‚æ•°è®¾ç½®" tabindex="-1">urlå¯é€‰å‚æ•°è®¾ç½® <a class="header-anchor" href="#urlå¯é€‰å‚æ•°è®¾ç½®" aria-hidden="true">#</a></h2><h4 id="_9-åˆ†é¡µpagination" tabindex="-1">9,åˆ†é¡µPagination <a class="header-anchor" href="#_9-åˆ†é¡µpagination" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å‚è€ƒæ–‡æ¡£, è®¾ç½®åˆ†é¡µè¿”å›</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å…¨å±€é…ç½®</p><ul><li><div class="language-python"><pre><code>REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  
    <span class="token comment">#5,å…¨å±€åˆ†é¡µ</span>
    <span class="token string">&#39;DEFAULT_PAGINATION_CLASS&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;rest_framework.pagination.LimitOffsetPagination&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;PAGE_SIZE&#39;</span><span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li><li><p>2, å±€éƒ¨é…ç½®</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    
    <span class="token comment">#5,å±€éƒ¨åˆ†é¡µ</span>
    <span class="token comment"># pagination_class = LimitOffsetPagination # ?limit=100 æˆ–è€… ?offset=400&amp;limit=100</span>
    pagination_class <span class="token operator">=</span> PageNumberPagination <span class="token comment"># ?page=4</span>

</code></pre></div></li></ul></li></ul></li></ul><h4 id="_10-è‡ªå®šä¹‰åˆ†é¡µç±»" tabindex="-1">10, è‡ªå®šä¹‰åˆ†é¡µç±» <a class="header-anchor" href="#_10-è‡ªå®šä¹‰åˆ†é¡µç±»" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥è‡ªå®šä¹‰ç±», å®ç°æŒ‡å®šåˆ†é¡µå¤§å°æ•ˆæœ</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token comment">#è‡ªå®šä¹‰åˆ†é¡µå¯¹è±¡</span>
<span class="token keyword">class</span> <span class="token class-name">MyPageNumberPagination</span><span class="token punctuation">(</span>PageNumberPagination<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#1,é»˜è®¤çš„å¤§å°</span>
    page_size <span class="token operator">=</span> <span class="token number">3</span>

    <span class="token comment">#2,å‰ç«¯å¯ä»¥æŒ‡å®šé¡µé¢å¤§å°</span>
    page_size_query_param <span class="token operator">=</span> <span class="token string">&#39;page_size&#39;</span>

    <span class="token comment">#3,é¡µé¢çš„æœ€å¤§å¤§å°</span>
    max_page_size <span class="token operator">=</span> <span class="token number">5</span>


<span class="token comment">#1,è§†å›¾é›†</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#6,è‡ªå®šä¹‰åˆ†é¡µå¯¹è±¡</span>
    pagination_class <span class="token operator">=</span> MyPageNumberPagination <span class="token comment"># ?page=4 æˆ–è€… ?page=4&amp;page_size=100</span>

</code></pre></div></li></ul></li></ul></li></ul><h4 id="_11-è¿‡æ»¤filtering" tabindex="-1">11,è¿‡æ»¤Filtering <a class="header-anchor" href="#_11-è¿‡æ»¤filtering" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥æ ¹æ®æ–‡æ¡£é…ç½®,è¿›è¡Œè¿‡æ»¤æ•°æ®è·å–</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å®‰è£…æ‰©å±•django-filters</p><ul><li>pip install django-filter</li></ul></li><li><p>2, æ³¨å†Œå­åº”ç”¨</p><ul><li><div class="language-"><pre><code>INSTALLED_APPS = [
    ...
    &#39;django_filters&#39;,
]
</code></pre></div></li></ul></li><li><p>3, å…¨å±€é…ç½®</p><ul><li><div class="language-python"><pre><code>REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string">&#39;DEFAULT_FILTER_BACKENDS&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;django_filters.rest_framework.DjangoFilterBackend&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li><li><p>4, å…¨å±€é…ç½®(<a href="http://views.py" target="_blank" rel="noopener noreferrer">views.py</a>)</p><ul><li><div class="language-"><pre><code>class BookInfoModelViewSet(ModelViewSet):
	....
  #7,å±€éƒ¨è¿‡æ»¤
  filter_backends = [DjangoFilterBackend]
  filterset_fields = [&#39;id&#39;, &#39;btitle&#39;,&quot;is_delete&quot;]
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_12-æ’åºorderingfilter" tabindex="-1">12,æ’åºOrderingFilter <a class="header-anchor" href="#_12-æ’åºorderingfilter" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å‚è€ƒæ–‡æ¡£, ä½¿ç”¨æŒ‡å®šçš„å­—æ®µè¿›è¡Œæ’åº</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, ç±»è§†å›¾</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
      <span class="token comment">#8,å±€éƒ¨æ’åº</span>
    filter_backends <span class="token operator">=</span> <span class="token punctuation">[</span>filters<span class="token punctuation">.</span>OrderingFilter<span class="token punctuation">]</span> <span class="token comment"># å¯¼åŒ…è·¯å¾„: from rest_framework import filters</span>
    
    ordering_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;btitle&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;bread&#39;</span><span class="token punctuation">]</span> <span class="token comment">#æŸ¥è¯¢æ ¼å¼: ?ordering=-bread,id</span>

</code></pre></div></li></ul></li></ul></li></ul><h2 id="å…¶ä»–" tabindex="-1">å…¶ä»– <a class="header-anchor" href="#å…¶ä»–" aria-hidden="true">#</a></h2><h4 id="_13-å¼‚å¸¸å¤„ç†exceptions" tabindex="-1">13,å¼‚å¸¸å¤„ç†Exceptions <a class="header-anchor" href="#_13-å¼‚å¸¸å¤„ç†exceptions" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å‚è€ƒæ–‡æ¡£, å¤„ç†ç¨‹åºä¸­çš„å¼‚å¸¸ä¿¡æ¯</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1, å®šä¹‰è‡ªå®šä¹‰å¤„ç†æ–¹æ³•(booktest/my_exception.py)</p><ul><li><div class="language-python"><pre><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>views <span class="token keyword">import</span> exception_handler
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response
<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> DatabaseError

<span class="token keyword">def</span> <span class="token function">custom_exception_handler</span><span class="token punctuation">(</span>exc<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment">#1,è°ƒç”¨ç³»ç»Ÿæ–¹æ³•,å¤„ç†äº†APIExceptionçš„å¼‚å¸¸,æˆ–è€…å…¶å­ç±»å¼‚å¸¸</span>
    response <span class="token operator">=</span> exception_handler<span class="token punctuation">(</span>exc<span class="token punctuation">,</span> context<span class="token punctuation">)</span>

    <span class="token comment">#2,åˆ¤æ–­responseæ˜¯å¦æœ‰å€¼</span>
    <span class="token keyword">if</span> response <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        response<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">&#39;status_code&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>status_code
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>exc<span class="token punctuation">,</span> DatabaseError<span class="token punctuation">)</span><span class="token punctuation">:</span>
            response <span class="token operator">=</span> Response<span class="token punctuation">(</span><span class="token string">&quot;æ•°æ®åº“å¤§å‡ºè¡€&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            response <span class="token operator">=</span> Response<span class="token punctuation">(</span><span class="token string">&quot;å…¶ä»–å¼‚å¸¸!&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> response
</code></pre></div></li></ul></li><li><p>2, å…¨å±€é…ç½®(<a href="http://settings.py" target="_blank" rel="noopener noreferrer">settings.py</a>)</p><ul><li><div class="language-python"><pre><code>REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
  	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token string">&#39;EXCEPTION_HANDLER&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;booktest.my_exception.custom_exception_handler&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li><li><p>3, æµ‹è¯•(<a href="http://views.py" target="_blank" rel="noopener noreferrer">views.py</a>)</p><ul><li><div class="language-python"><pre><code><span class="token keyword">class</span> <span class="token class-name">TestView</span><span class="token punctuation">(</span>APIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># throttle_scope = &quot;uploads&quot;</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment"># raise DatabaseError(&quot;DatabaseError!!!&quot;)</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">&quot;æŠ¥é”™äº†!!!&quot;</span><span class="token punctuation">)</span>
        <span class="token comment"># raise APIException(&quot;APIException!!!&quot;)</span>
        <span class="token comment"># raise ValidationError(&quot;ValidationError!!!&quot;)</span>

        <span class="token keyword">return</span> Response<span class="token punctuation">(</span><span class="token string">&quot;testing....&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul></li></ul><h4 id="_14-æ¥å£æ–‡æ¡£-äº†è§£" tabindex="-1">14,æ¥å£æ–‡æ¡£(äº†è§£) <a class="header-anchor" href="#_14-æ¥å£æ–‡æ¡£-äº†è§£" aria-hidden="true">#</a></h4><ul><li><p>ç›®çš„: å¯ä»¥å‚è€ƒæ–‡æ¡£, é…ç½®åç«¯æ•°æ®çš„å…¥å£æ–‡æ¡£</p></li><li><p>æ“ä½œæµç¨‹:</p><ul><li><p>1,å®‰è£…æ‰©å±•</p><ul><li>pip install coreapi</li></ul></li><li><p>2, æ ¹è·¯ç”±</p><ul><li>url(<strong>r&#39;^docs/&#39;</strong>, include_docs_urls(title=<strong>&#39;æˆ‘çš„APIæ–‡æ¡£&#39;</strong>))</li></ul></li><li><p>3, ä¿®æ”¹å­—æ®µè¯´æ˜ä¿¡æ¯</p><ul><li><p>æ¨¡å‹ç±»</p><ul><li>btitle = models.CharField(max_length=20, verbose_name=<strong>&#39;åç§°&#39;</strong>,help_text=<strong>&quot;ä¹¦ç±æ ‡é¢˜&quot;</strong>)</li></ul></li><li><p>åºåˆ—åŒ–å™¨</p><ul><li><div class="language-python"><pre><code><span class="token comment">#1,æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        extra_kwargs <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;bread&#39;</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
                <span class="token string">&#39;help_text&#39;</span><span class="token punctuation">:</span><span class="token string">&quot;ä¹¦ç±é˜…è¯»é‡&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></li></ul></li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/çŸ¥è¯†åº“/åç«¯å‚¨å¤‡/Djangoè¿›é˜¶å­¦ä¹ ç¬”è®°" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Djangoè¿›é˜¶å­¦ä¹ ç¬”è®°</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/çŸ¥è¯†åº“/åç«¯å‚¨å¤‡/Rediså­¦ä¹ ç¬”è®°" data-v-38ede35f><span class="text" data-v-38ede35f>Rediså­¦ä¹ ç¬”è®°</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"1d8dde93\",\"æ¨è_typescript.md\":\"e40898d9\",\"æ¨è_index.md\":\"4ed1a4be\",\"æ¨è_åŠ¨æ€è§„åˆ’.md\":\"11724621\",\"æ¨è_æ“ä½œç³»ç»Ÿå†…å­˜åˆ†é…æ¨¡æ‹Ÿç¨‹åº.md\":\"e90f85be\",\"æ¨è_æ•£åˆ—è¡¨å®ç°æŸ¥æ‰¾.md\":\"6c0c112c\",\"æ¨è_è¿™é“é¢˜åŸæ¥å¯ä»¥ç”¨åˆ°jsè¿™ä¹ˆå¤šçŸ¥è¯†ç‚¹ï¼.md\":\"07db4206\",\"æ¨è_éƒ½2022å¹´äº†ï¼Œè¿˜æ˜¯å¾—å­¦åœ£æ¯å¸ƒå±€ä¸åŒé£ç¿¼å¸ƒå±€.md\":\"012f0078\",\"çŸ¥è¯†åº“_aiç›¸å…³_tfidfè®¡ç®—çš„å­¦ä¹ .md\":\"c9265030\",\"çŸ¥è¯†åº“_aiç›¸å…³_index.md\":\"3a66f3b5\",\"çŸ¥è¯†åº“_cssç›¸å…³_01éƒ½2022å¹´äº†ï¼Œè¿˜æ˜¯å¾—å­¦åœ£æ¯å¸ƒå±€ä¸åŒé£ç¿¼å¸ƒå±€.md\":\"4d37581d\",\"çŸ¥è¯†åº“_cssç›¸å…³_index.md\":\"a71bbada\",\"çŸ¥è¯†åº“_javascript_typescript.md\":\"37a96a07\",\"çŸ¥è¯†åº“_javascript_index.md\":\"e7ebe10c\",\"çŸ¥è¯†åº“_javascript_è¿™é“é¢˜åŸæ¥å¯ä»¥ç”¨åˆ°jsè¿™ä¹ˆå¤šçŸ¥è¯†ç‚¹ï¼.md\":\"857449e5\",\"çŸ¥è¯†åº“_uiç»„ä»¶åº“_index.md\":\"2bd6def9\",\"çŸ¥è¯†åº“_index.md\":\"af41836f\",\"çŸ¥è¯†åº“_å‰ç«¯æ¡†æ¶_01vue3æ˜¯å¦‚ä½•è¿è¡Œçš„.md\":\"969fdbb9\",\"çŸ¥è¯†åº“_å‰ç«¯æ¡†æ¶_02vue3ç¼–è¯‘å™¨.md\":\"fd46348e\",\"çŸ¥è¯†åº“_å‰ç«¯æ¡†æ¶_03è™šæ‹Ÿdom.md\":\"6ef7f095\",\"çŸ¥è¯†åº“_å‰ç«¯æ¡†æ¶_04vue3-reactivity.md\":\"da98e3db\",\"çŸ¥è¯†åº“_å‰ç«¯æ¡†æ¶_05mini-vue.md\":\"66aee536\",\"çŸ¥è¯†åº“_å‰ç«¯æ¡†æ¶_06vue3å…¶ä»–.md\":\"3aaeab65\",\"çŸ¥è¯†åº“_å‰ç«¯æ¡†æ¶_index.md\":\"7afb1c04\",\"çŸ¥è¯†åº“_åç«¯å‚¨å¤‡_drfå­¦ä¹ ç¬”è®°.md\":\"96a743e3\",\"çŸ¥è¯†åº“_åç«¯å‚¨å¤‡_djangoè¿›é˜¶å­¦ä¹ ç¬”è®°.md\":\"ea44ee8c\",\"çŸ¥è¯†åº“_åç«¯å‚¨å¤‡_rediså­¦ä¹ ç¬”è®°.md\":\"9812981b\",\"çŸ¥è¯†åº“_åç«¯å‚¨å¤‡_index.md\":\"28a806b0\",\"çŸ¥è¯†åº“_æ•°æ®ç›¸å…³_index.md\":\"67502efc\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_01åŸºç¡€æ¦‚å¿µ.md\":\"5244ec12\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_02çº¿æ€§è¡¨.md\":\"8a428a9c\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_03æ ˆå’Œé˜Ÿåˆ—.md\":\"b0027a00\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_04æ•°ç»„.md\":\"a1395525\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_05æ ‘.md\":\"4a380226\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_06å›¾.md\":\"2a1ea4ea\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_07æŸ¥æ‰¾.md\":\"4661eacb\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_08æ’åº.md\":\"9272c4cb\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_09æ•£åˆ—è¡¨å®ç°æŸ¥æ‰¾.md\":\"1e4488fd\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_10ç®—æ³•æ¦‚è¿°.md\":\"325360a3\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_11é€’å½’ä¸åˆ†æ²».md\":\"b6ab08ff\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_12åŠ¨æ€è§„åˆ’.md\":\"13832bb6\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_13è´ªå¿ƒç®—æ³•.md\":\"07808a4e\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_14å›æº¯ä¸åˆ†æ”¯ç•Œé™.md\":\"7ee0c267\",\"çŸ¥è¯†åº“_ç®—æ³•ä¸æ•°æ®ç»“æ„_index.md\":\"e2aa4fb8\",\"çŸ¥è¯†åº“_è®¡ç®—æœºåŸºç¡€çŸ¥è¯†_index.md\":\"c086ad1b\",\"çŸ¥è¯†åº“_è®¡ç®—æœºåŸºç¡€çŸ¥è¯†_æ“ä½œç³»ç»Ÿå†…å­˜åˆ†é…æ¨¡æ‹Ÿç¨‹åº.md\":\"cd88e67f\",\"çŸ¥è¯†åº“_è®¡ç®—æœºåŸºç¡€çŸ¥è¯†_æ“ä½œç³»ç»ŸåŸºç¡€.md\":\"268c0b83\"}")</script>
    <script type="module" async src="/assets/app.0b1f5e83.js"></script>
    
  </body>
</html>