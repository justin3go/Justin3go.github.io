import{_ as n,c as s,o as a,b as p}from"./app.8fb4f2f8.js";const d='{"title":"3,\u8DEF\u7531router","description":"","frontmatter":{},"headers":[],"relativePath":"\u77E5\u8BC6\u5E93/\u540E\u7AEF\u50A8\u5907/19router.md","lastUpdated":1643983991869}',t={},o=p(`<h4 id="_3-\u8DEF\u7531router" tabindex="-1">3,\u8DEF\u7531router <a class="header-anchor" href="#_3-\u8DEF\u7531router" aria-hidden="true">#</a></h4><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u901A\u8FC7DefaultRouter\u548CSimpleRouter\u4E24\u4E2A\u7C7B\u6765\u81EA\u52A8\u751F\u6210\u8DEF\u7531</p></li><li><p>DefautRouter\u751F\u6210\u8DEF\u7531\u683C\u5F0F:</p><ul><li><p>\u7279\u70B9: \u5171\u6709\u4E09\u5BF9\u8DEF\u7531</p><ul><li>1, \u5217\u8868\u8DEF\u7531</li><li>2, \u8BE6\u60C5\u8DEF\u7531</li><li>3, \u6839\u8DEF\u7531</li></ul></li><li><div class="language-python line-numbers-mode"><pre><code><span class="token punctuation">[</span>

<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span><span class="token builtin">list</span> <span class="token operator">^</span>books<span class="token operator">/</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span><span class="token builtin">list</span> <span class="token operator">^</span>books\\<span class="token punctuation">.</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>?$<span class="token operator">&gt;</span><span class="token punctuation">,</span>

<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span>detail <span class="token operator">^</span>books<span class="token operator">/</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span>pk<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span>detail <span class="token operator">^</span>books<span class="token operator">/</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span>pk<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\\<span class="token punctuation">.</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>?$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 

<span class="token operator">&lt;</span>RegexURLPattern api<span class="token operator">-</span>root <span class="token operator">^</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern api<span class="token operator">-</span>root <span class="token operator">^</span>\\<span class="token punctuation">.</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>?$<span class="token operator">&gt;</span>

<span class="token punctuation">]</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li><li><p>SimpleRouter\u751F\u6210\u8DEF\u7531\u683C\u5F0F:</p><ul><li><p>\u7279\u70B9: \u751F\u6210\u4E24\u4E2A\u8DEF\u7531</p><ul><li>1, \u5217\u8868\u8DEF\u7531</li><li>2, \u8BE6\u60C5\u8DEF\u7531</li></ul></li><li><div class="language-python line-numbers-mode"><pre><code><span class="token punctuation">[</span>
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span><span class="token builtin">list</span> <span class="token operator">^</span>books<span class="token operator">/</span>$<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
<span class="token operator">&lt;</span>RegexURLPattern haha<span class="token operator">-</span>detail <span class="token operator">^</span>books<span class="token operator">/</span><span class="token punctuation">(</span>?P<span class="token operator">&lt;</span>pk<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span>$<span class="token operator">&gt;</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li></ul></li><li><p>\u64CD\u4F5C\u6D41\u7A0B:</p><ul><li><p>1, \u5B50\u8DEF\u7531</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>routers <span class="token keyword">import</span> SimpleRouter<span class="token punctuation">,</span>DefaultRouter
<span class="token comment">#1,\u521B\u5EFA\u8DEF\u7531\u5BF9\u8C61</span>
router <span class="token operator">=</span> SimpleRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">#2,\u6CE8\u518C\u89C6\u56FE\u96C6</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">&#39;books&#39;</span><span class="token punctuation">,</span>views<span class="token punctuation">.</span>BookInfoModelViewSet<span class="token punctuation">,</span>base_name<span class="token operator">=</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span>
urlpatterns <span class="token operator">+=</span> router<span class="token punctuation">.</span>urls

<span class="token comment">#3,\u8F93\u51FA\u7ED3\u679C</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>urlpatterns<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li></ul></li><li><p>\u6CE8\u610F\u70B9:</p><ul><li>1, \u4F7F\u7528DRF\u53EF\u4EE5\u81EA\u52A8\u6839\u636E\u524D\u7AEF\u9700\u8981\u7684\u7C7B\u578B, \u8FD4\u56DE\u5BF9\u5E94\u683C\u5F0F\u7684\u6570\u636E</li><li>2, \u8BF7\u6C42\u7684\u65F6\u5019\u5728\u8BF7\u6C42\u5934\u4E2D\u6807\u8BB0, Accept\u5373\u53EF</li><li>3, \u53EA\u6709\u89C6\u56FE\u96C6,\u624D\u80FD\u81EA\u52A8\u751F\u6210\u8DEF\u7531</li></ul></li></ul><h4 id="_4-\u88C5\u9970action" tabindex="-1">4,\u88C5\u9970action <a class="header-anchor" href="#_4-\u88C5\u9970action" aria-hidden="true">#</a></h4><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u901A\u8FC7action\u88C5\u9970\u65B9\u6CD5, \u81EA\u52A8\u751F\u6210\u8DEF\u7531</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B:</p><ul><li><p>1, \u7C7B\u89C6\u56FE</p></li><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> action

<span class="token comment">#1,\u89C6\u56FE\u96C6</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoModelViewSet</span><span class="token punctuation">(</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#1,\u83B7\u53D6\u9605\u8BFB\u91CF\u5927\u4E8E20\u7684\u4E66\u7C4D</span>
    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>detail<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment">#\u751F\u6210\u8DEF\u7531\u89C4\u5219: \u524D\u7F00/\u65B9\u6CD5\u540D/</span>
    <span class="token keyword">def</span> <span class="token function">bread_book</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#2,\u4FEE\u6539\u4E66\u7C4D\u7F16\u53F7\u4E3A1\u7684, \u9605\u8BFB\u91CF\u4E3A99</span>
    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;PUT&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment">#\u751F\u6210\u8DEF\u7531\u89C4\u5219: \u524D\u7F00/{pk}/\u65B9\u6CD5\u540D/</span>
    <span class="token keyword">def</span> <span class="token function">update_book_bread</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>request<span class="token punctuation">,</span>pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul></li></ul>`,4),e=[o];function l(c,r,u,i,k,b){return a(),s("div",null,e)}var _=n(t,[["render",l]]);export{d as __pageData,_ as default};
