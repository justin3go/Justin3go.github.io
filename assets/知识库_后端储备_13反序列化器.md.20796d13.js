import{_ as n,c as s,o as a,a as p}from"./app.f0844215.js";const d='{"title":"\u53CD\u5E8F\u5217\u5316","description":"","frontmatter":{},"headers":[{"level":3,"title":"\u53CD\u5E8F\u5217\u5316","slug":"\u53CD\u5E8F\u5217\u5316"},{"level":3,"title":"\u6570\u636E\u5165\u5E93","slug":"\u6570\u636E\u5165\u5E93"}],"relativePath":"\u77E5\u8BC6\u5E93/\u540E\u7AEF\u50A8\u5907/13\u53CD\u5E8F\u5217\u5316\u5668.md","lastUpdated":1646443001471}',e={},t=p(`<h3 id="\u53CD\u5E8F\u5217\u5316" tabindex="-1">\u53CD\u5E8F\u5217\u5316 <a class="header-anchor" href="#\u53CD\u5E8F\u5217\u5316" aria-hidden="true">#</a></h3><blockquote><p>\u6821\u9A8C\uFF1A</p><ol><li>\u5B57\u6BB5\u7C7B\u578B\u6821\u9A8C</li><li>\u5B57\u6BB5\u9009\u9879\u6821\u9A8C</li><li>\u5355\u5B57\u6BB5\uFF0C\u6821\u9A8C\uFF08\u65B9\u6CD5\uFF09</li><li>\u591A\u5B57\u6BB5\u6821\u9A8C\uFF08\u65B9\u6CD5\uFF09</li><li>\u81EA\u5B9A\u4E49\u6821\u9A8C\uFF08\u65B9\u6CD5\uFF09</li></ol></blockquote><h4 id="_18-\u53CD\u5E8F\u5217\u5316-\u5B57\u6BB5\u7C7B\u578B\u6821\u9A8C" tabindex="-1">18,\u53CD\u5E8F\u5217\u5316-\u5B57\u6BB5\u7C7B\u578B\u6821\u9A8C <a class="header-anchor" href="#_18-\u53CD\u5E8F\u5217\u5316-\u5B57\u6BB5\u7C7B\u578B\u6821\u9A8C" aria-hidden="true">#</a></h4><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u4F7F\u7528\u5E8F\u5217\u5316\u5668,\u5BF9\u6570\u636E\u8FDB\u884C\u6821\u9A8C\u64CD\u4F5C</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B: serializer.is_valid(raise_exception=True)</p><div class="language-Python line-numbers-mode"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,\u51C6\u5907\u5B57\u5178\u6570\u636E</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;\u91D1\u74F6x-\u63D2\u753B\u7248&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">25</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u5BF9\u8C61</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,\u6821\u9A8C, raise_exception=True, \u6821\u9A8C\u4E0D\u901A\u8FC7,\u629B\u51FA\u5F02\u5E38\u4FE1\u606F</span>
<span class="token comment"># \u4E5F\u53EF\u4EE5\u76F4\u63A5\u6253\u5370\u9519\u8BEF\u4FE1\u606Fprint(serializer.error_messages)</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul><h4 id="_19-\u53CD\u5E8F\u5217\u5316-\u5B57\u6BB5\u9009\u9879\u6821\u9A8C" tabindex="-1">19,\u53CD\u5E8F\u5217\u5316-\u5B57\u6BB5\u9009\u9879\u6821\u9A8C <a class="header-anchor" href="#_19-\u53CD\u5E8F\u5217\u5316-\u5B57\u6BB5\u9009\u9879\u6821\u9A8C" aria-hidden="true">#</a></h4><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u4F7F\u7528\u5E8F\u5217\u5316\u5668,\u5BF9\u6570\u636E\u8FDB\u884C\u9009\u9879\u7EA6\u675F\u6821\u9A8C</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B: serializer.is_valid(raise_exception=True)</p><ul><li><p>1, \u5E8F\u5217\u5316\u5668</p><ul><li><p>min_value=0</p></li><li><p>max_value=50</p></li><li><p>required: \u9ED8\u8BA4\u5C31\u662FTrue\uFF0C\u5FC5\u987B\u8981\u4F20\u9012\uFF0C\u9664\u975E\u8BBE\u7F6E\u4E86default | false | read_only</p></li><li><p>\u6709read_only=True\uFF0C\u4F1A\u8FDB\u884C\u5E8F\u5217\u5316\u64CD\u4F5C\uFF0C\u5E76\u4E14\u53CD\u5E8F\u5217\u5316\u65F6\u4E0D\u9700\u8981\u4F20\u8BE5\u53C2\u4E5F\u80FD\u6821\u9A8C\u901A\u8FC7\uFF08\u4E0D\u8FDB\u884C\u53CD\u5E8F\u5217\u5316\uFF09</p></li><li><p>\u7EA6\u675F\u6F14\u793A</p></li><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    bread <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>min_value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;\u9605\u8BFB\u91CF&quot;</span><span class="token punctuation">)</span>
    bcomment <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>max_value<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;\u8BC4\u8BBA\u91CF&quot;</span><span class="token punctuation">)</span>
    is_delete <span class="token operator">=</span> serializers<span class="token punctuation">.</span>BooleanField<span class="token punctuation">(</span>default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;\u903B\u8F91\u5220\u9664&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li><li><p>2, \u7C7B\u89C6\u56FE</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,\u51C6\u5907\u5B57\u5178\u6570\u636E</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;\u91D1\u74F6x&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">99</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u5BF9\u8C61</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,\u6821\u9A8C</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul></li></ul></li></ul><h4 id="_20-\u53CD\u5E8F\u5217\u5316-\u5355\u5B57\u6BB5\u6821\u9A8C" tabindex="-1">20,\u53CD\u5E8F\u5217\u5316-\u5355\u5B57\u6BB5\u6821\u9A8C <a class="header-anchor" href="#_20-\u53CD\u5E8F\u5217\u5316-\u5355\u5B57\u6BB5\u6821\u9A8C" aria-hidden="true">#</a></h4><blockquote><p>\u5728\u8C03\u7528is_vaild\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u5B83\u4F1A\u8FDB\u5165\u4F60\u7F16\u5199\u7684\u5355\u5B57\u6BB5\u68C0\u9A8C\u65B9\u6CD5</p><p>\u5176\u4E2Dvaildata()\u4EE3\u8868\u591A\u5B57\u6BB5\u6821\u9A8C\uFF0C\u800C\u540E\u9762\u8DDF\u4E0A\u4E0B\u5212\u7EBF\u52A0\u4E0A\u5B57\u6BB5\u540D\u4E3A\u65B9\u6CD5\u540D\u7684\u8BDD\u4EE3\u8868\u8BE5\u65B9\u6CD5\u4E3A\u5355\u5B57\u6BB5\u6821\u9A8C</p><p>attrs\u5C31\u662F\u4F20\u8FC7\u6765\u7684\u6570\u636E\uFF1A\u5728\u8FD9\u91CC\u662Fbtitle</p></blockquote><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u7F16\u5199\u5355\u5B57\u6BB5\u6821\u9A8C\u65B9\u6CD5, \u5BF9btitle\u8FDB\u884C\u6821\u9A8C</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B:</p><ul><li><p>1, \u5E8F\u5217\u5316\u5668</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#3, \u5355\u5B57\u6BB5\u6821\u9A8C, \u65B9\u6CD5; \u9700\u6C42: \u6DFB\u52A0\u7684\u4E66\u7C4D\u5FC5\u987B\u5305\u542B&#39;\u91D1\u74F6&#39;</span>
    <span class="token keyword">def</span> <span class="token function">validate_btitle</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;value = {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>attrs<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">#1,\u5224\u65AD\u4F20\u5165\u7684value\u4E2D\u662F\u5426\u5305\u542B\u91D1\u74F6</span>
        <span class="token keyword">if</span> <span class="token string">&quot;\u91D1\u74F6&quot;</span> <span class="token keyword">not</span> <span class="token keyword">in</span> attrs<span class="token punctuation">:</span>
            <span class="token keyword">raise</span> serializers<span class="token punctuation">.</span>ValidationError<span class="token punctuation">(</span><span class="token string">&quot;\u4E66\u540D\u5FC5\u987B\u5305\u542B\u91D1\u74F6&quot;</span><span class="token punctuation">)</span>

        <span class="token comment">#2,\u8FD4\u56DE\u7ED3\u679C</span>
        <span class="token keyword">return</span> attrs
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul></li><li><p>2, \u7C7B\u89C6\u56FE</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,\u51C6\u5907\u5B57\u5178\u6570\u636E</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;\u91D1\u74F6x&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u5BF9\u8C61</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,\u6821\u9A8C</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul></li></ul></li><li><p>\u6CE8\u610F\u70B9:</p><ul><li>\u5355\u5B57\u6BB5\u6821\u9A8C\u65B9\u6CD5 <ul><li>def validate_==\u5B57\u6BB5\u540D==(self,value): <ul><li>pass</li></ul></li></ul></li><li>\u5982\u679C\u6821\u9A8C\u4E0D\u901A\u8FC7,\u76F4\u63A5\u629B\u51FA\u5F02\u5E38\u5373\u53EF</li></ul></li></ul><h4 id="_21-\u53CD\u5E8F\u5217\u5316-\u591A\u5B57\u6BB5\u6821\u9A8C" tabindex="-1">21,\u53CD\u5E8F\u5217\u5316-\u591A\u5B57\u6BB5\u6821\u9A8C <a class="header-anchor" href="#_21-\u53CD\u5E8F\u5217\u5316-\u591A\u5B57\u6BB5\u6821\u9A8C" aria-hidden="true">#</a></h4><blockquote><p>\u8FD9\u91CC\u63A5\u6536\u7684attrs\u5C31\u662F\u4F20\u5165\u7684\u6574\u4E2A\u5B57\u5178\u4E86</p></blockquote><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u7F16\u5199\u591A\u5B57\u6BB5\u6821\u9A8C\u65B9\u6CD5, \u5BF9\u9605\u8BFB\u91CF\u548C\u8BC4\u8BBA\u91CF\u8FDB\u884C\u5224\u65AD\uFF08\u4E24\u4E24\u4E4B\u95F4\u6BD4\u8F83\u5E38\u7528\u591A\u5B57\u6BB5\u6821\u9A8C\uFF09</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B:</p><ul><li><p>1, \u5E8F\u5217\u5316\u5668</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">#4,\u591A\u5B57\u6BB5\u6821\u9A8C, \u65B9\u6CD5; \u6DFB\u52A0\u4E66\u7C4D\u7684\u65F6\u5019,\u8BC4\u8BBA\u91CF\u4E0D\u80FD\u5927\u4E8E\u9605\u8BFB\u91CF</span>
    <span class="token keyword">def</span> <span class="token function">validate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        :param attrs: \u5916\u754C\u4F20\u5165\u7684\u9700\u8981\u6821\u9A8C\u7684\u5B57\u5178
        :return:
        &quot;&quot;&quot;</span>
        <span class="token comment">#1,\u5224\u65AD\u8BC4\u8BBA\u91CF\u548C\u9605\u8BFB\u91CF\u7684\u5173\u7CFB</span>
        <span class="token keyword">if</span> attrs<span class="token punctuation">[</span><span class="token string">&quot;bread&quot;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> attrs<span class="token punctuation">[</span><span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> serializers<span class="token punctuation">.</span>ValidationError<span class="token punctuation">(</span><span class="token string">&quot;\u8BC4\u8BBA\u91CF\u4E0D\u80FD\u5927\u4E8E\u9605\u8BFB\u91CF&quot;</span><span class="token punctuation">)</span>

        <span class="token comment">#2,\u8FD4\u56DE\u7ED3\u679C</span>
        <span class="token keyword">return</span> attrs
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul></li><li><p>2, \u7C7B\u89C6\u56FE</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot; ===============7, \u53CD\u5E8F\u5217\u5316-\u591A\u5B57\u6BB5\u6821\u9A8C ================= &quot;&quot;&quot;</span><span class="token string">&quot;&quot;</span>
<span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,\u51C6\u5907\u5B57\u5178\u6570\u636E</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;\u91D1\u74F6xxx&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">33</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">22</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u5BF9\u8C61</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,\u6821\u9A8C</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul></li></ul></li></ul><h4 id="_22-\u53CD\u5E8F\u5217\u5316-\u81EA\u5B9A\u4E49\u6821\u9A8C-\u7406\u89E3" tabindex="-1">22,\u53CD\u5E8F\u5217\u5316-\u81EA\u5B9A\u4E49\u6821\u9A8C(\u7406\u89E3) <a class="header-anchor" href="#_22-\u53CD\u5E8F\u5217\u5316-\u81EA\u5B9A\u4E49\u6821\u9A8C-\u7406\u89E3" aria-hidden="true">#</a></h4><blockquote><p>\u628A\u81EA\u5B9A\u4E49\u7684\u6821\u9A8C\u65B9\u6CD5\u540D\u52A0\u5165\u5230\u5B57\u6BB5\u7684\u9009\u9879validators\u4E2D</p></blockquote><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u81EA\u5B9A\u4E49\u65B9\u6CD5,\u5BF9\u65E5\u671F\u8FDB\u884C\u6821\u9A8C</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B:</p><ul><li><p>1, \u5E8F\u5217\u5316\u5668</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token comment">#\u9700\u6C42: \u6DFB\u52A0\u7684\u4E66\u7C4D\u7684\u65E5\u671F\u4E0D\u80FD\u5C0F\u4E8E2015\u5E74</span>
<span class="token keyword">def</span> <span class="token function">check_bpub_date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;date = {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> date<span class="token punctuation">.</span>year <span class="token operator">&lt;</span> <span class="token number">2015</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> serializers<span class="token punctuation">.</span>ValidationError<span class="token punctuation">(</span><span class="token string">&quot;\u65E5\u671F\u4E0D\u80FD\u5C0F\u4E8E2015\u5E74&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> date
  
<span class="token comment">#1,\u5B9A\u4E49\u4E66\u7C4D\u5E8F\u5217\u5316\u5668</span>
<span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    bpub_date <span class="token operator">=</span> serializers<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&quot;\u53D1\u5E03\u65E5\u671F&quot;</span><span class="token punctuation">,</span>validators<span class="token operator">=</span><span class="token punctuation">[</span>check_bpub_date<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul></li><li><p>2, \u7C7B\u89C6\u56FE</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token triple-quoted-string string">&quot;&quot;&quot; ===============8, \u53CD\u5E8F\u5217\u5316-\u81EA\u5B9A\u4E49\u6821\u9A8C ================= &quot;&quot;&quot;</span><span class="token string">&quot;&quot;</span>
<span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,\u51C6\u5907\u5B57\u5178\u6570\u636E</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;\u91D1\u74F6xxx&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2011-11-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u5BF9\u8C61</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,\u6821\u9A8C</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul></li></ul></li></ul><h3 id="\u6570\u636E\u5165\u5E93" tabindex="-1">\u6570\u636E\u5165\u5E93 <a class="header-anchor" href="#\u6570\u636E\u5165\u5E93" aria-hidden="true">#</a></h3><ol><li>\u521B\u5EFA\u65B0\u7684\u5BF9\u8C61</li><li>\u66F4\u65B0 \u5BF9\u8C61</li></ol><h4 id="_23-\u53CD\u5E8F\u5217\u5316-\u6570\u636E\u5165\u5E93create-\u638C\u63E1" tabindex="-1">23,\u53CD\u5E8F\u5217\u5316-\u6570\u636E\u5165\u5E93create(\u638C\u63E1) <a class="header-anchor" href="#_23-\u53CD\u5E8F\u5217\u5316-\u6570\u636E\u5165\u5E93create-\u638C\u63E1" aria-hidden="true">#</a></h4><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u5C06\u4E66\u7C4D\u5BF9\u8C61\u4FDD\u5B58\u5230\u6570\u636E\u5E93\u4E2D</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B:</p><ul><li><p>1, \u5E8F\u5217\u5316\u5668</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    
  <span class="token comment">#5,\u91CD\u5199create\u65B9\u6CD5,\u5B9E\u73B0\u6570\u636E\u5165\u5E93</span>
    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> validated_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># print(&quot;validated_data = {}&quot;.format(validated_data))</span>

        <span class="token comment">#1,\u521B\u5EFAbook\u5BF9\u8C61,\u5165\u5E93</span>
        book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span>validated_data<span class="token punctuation">)</span>

        <span class="token comment">#2,\u8FD4\u56DE\u54CD\u5E94</span>
        <span class="token keyword">return</span> book
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul></li><li><p>2, \u7C7B\u89C6\u56FE</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer

<span class="token comment">#1,\u51C6\u5907\u5B57\u5178\u6570\u636E</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;\u91D1\u74F6xxx-\u7CBE\u88C5\u7248&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2015-11-01&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u5BF9\u8C61</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,\u6821\u9A8C</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment">#4,\u5165\u5E93</span>
serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul></li><li><p>\u6CE8\u610F\u70B9:</p></li><li><p><img src="https://webplus-cn-shenzhen-s-6130b804f968dd14cecc43e2.oss-cn-shenzhen.aliyuncs.com/blogs/image-20191217154212337-16347388278283.png" alt="image-20191217154212337"></p></li></ul></li></ul><h4 id="_24-\u53CD\u5E8F\u5217\u5316-\u6570\u636E\u66F4\u65B0update-\u638C\u63E1" tabindex="-1">24,\u53CD\u5E8F\u5217\u5316-\u6570\u636E\u66F4\u65B0update(\u638C\u63E1) <a class="header-anchor" href="#_24-\u53CD\u5E8F\u5217\u5316-\u6570\u636E\u66F4\u65B0update-\u638C\u63E1" aria-hidden="true">#</a></h4><blockquote><p>\u5F53\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u7684\u65F6\u5019\u4F20\u9012\u4E86\u4E24\u4E2A\u53C2\u6570\uFF0C\u5B83\u4F1A\u81EA\u52A8\u53BB\u627Eupdate()\u65B9\u6CD5</p></blockquote><ul><li><p>\u76EE\u7684: \u53EF\u4EE5\u91CD\u5199update\u65B9\u6CD5, \u66F4\u65B0\u6570\u636E\u5E93\u4E2D\u6307\u5B9A\u7684\u4E66\u7C4D</p></li><li><p>\u64CD\u4F5C\u6D41\u7A0B:</p><ul><li><p>1, \u5E8F\u5217\u5316\u5668</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">class</span> <span class="token class-name">BookInfoSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   
  <span class="token comment">#6,\u91CD\u5199update\u65B9\u6CD5,\u5B9E\u73B0\u6570\u636E\u66F4\u65B0</span>
    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> validated_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        :param instance: \u9700\u8981\u66F4\u65B0\u7684\u5BF9\u8C61
        :param validated_data: \u9A8C\u8BC1\u6210\u529F\u4E4B\u540E\u7684\u6570\u636E
        :return:
        &quot;&quot;&quot;</span>
        <span class="token comment">#1,\u66F4\u65B0\u6570\u636E</span>
        instance<span class="token punctuation">.</span>btitle <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;btitle&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>bpub_date <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>bread <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;bread&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>bcomment <span class="token operator">=</span> validated_data<span class="token punctuation">[</span><span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">]</span>
        instance<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#2,\u8FD4\u56DE\u6570\u636E</span>
        book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>instance<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> book
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul></li><li><p>2, \u7C7B\u89C6\u56FE</p><ul><li><div class="language-python line-numbers-mode"><pre><code><span class="token keyword">from</span> book<span class="token punctuation">.</span>serializer <span class="token keyword">import</span> BookInfoSerializer
<span class="token keyword">from</span> book<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInfo

<span class="token comment">#1,\u51C6\u5907\u5B57\u5178\u6570\u636E</span>
book <span class="token operator">=</span> BookInfo<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
data_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;btitle&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;\u91D1\u74F6xxx-\u8FDE\u73AF\u753B&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bpub_date&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;2019-11-11&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bread&quot;</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token string">&quot;bcomment&quot;</span><span class="token punctuation">:</span><span class="token number">20</span>
<span class="token punctuation">}</span>

<span class="token comment">#2,\u521B\u5EFA\u5E8F\u5217\u5316\u5668\u5BF9\u8C61</span>
serializer <span class="token operator">=</span> BookInfoSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>book<span class="token punctuation">,</span>data<span class="token operator">=</span>data_dict<span class="token punctuation">)</span>

<span class="token comment">#3,\u6821\u9A8C</span>
<span class="token comment"># serializer.is_valid()</span>
serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span>raise_exception<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment">#4,\u5165\u5E93</span>
serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li></ul></li><li><p>\u6CE8\u610F\u70B9:</p><ul><li><img src="https://webplus-cn-shenzhen-s-6130b804f968dd14cecc43e2.oss-cn-shenzhen.aliyuncs.com/blogs/image-20191217160603632-16347388187162.png" alt="image-20191217160603632"></li></ul></li></ul></li></ul>`,22),o=[t];function l(c,i,u,r,k,b){return a(),s("div",null,o)}var q=n(e,[["render",l]]);export{d as __pageData,q as default};
